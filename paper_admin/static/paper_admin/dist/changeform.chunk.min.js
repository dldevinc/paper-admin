(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{119:function(t,e,o){"use strict";(function(t){var e=o(4),n=o(6),i=o(7),s=o(9);function r(t){this.element=t}function a(t,e){if(this.opts=Object.assign({prefix:"form",addButtonSelector:".add-row",deleteButtonSelector:".delete-row",formCssClass:"inline-related",emptyCssClass:"empty-form",animationSpeed:300,onAdded:null,onRemove:null},e),this.root=t,this.root._inline_formset=this,this.mgmt=new r(t),this.addButton=this.root.querySelector(this.opts.addButtonSelector),!this.addButton)throw new Error("addButton not found");this.addButton.hidden=this.mgmt.totalForms()>=this.mgmt.maxForms(),this.addButton.querySelector("a, button").addEventListener("click",function(t){t.preventDefault(),this.addRow()}.bind(this));const o=this;this.root.addEventListener("click",(function(t){const e=t.target;if(e.closest(o.opts.deleteButtonSelector)){t.preventDefault();const n=e.closest("."+o.opts.formCssClass);o.deleteRow(n)}}))}function c(t,e,o){const n=new RegExp("("+e+"-(\\d+|__prefix__))"),i=e+"-"+(o-1);t.querySelectorAll("*").forEach((function(t){t.htmlFor&&(t.htmlFor=t.htmlFor.replace(n,i)),t.id&&(t.id=t.id.replace(n,i)),t.name&&(t.name=t.name.replace(n,i))})),t.setAttribute("id",e+"-"+(o-1))}function l(t,e){const o=t.querySelector(".inline-label");o&&(o.innerHTML=o.innerHTML.replace(/(#\d+)/g,"#"+e))}i.b.registerPlugin(s.a),r.prototype.__property=function(t){return function(e){const o=this.element.querySelector(t);if(void 0===e)return parseInt(o.value.toString());e=parseInt(e),isNaN(e)||(o.value=e)}},r.prototype.totalForms=r.prototype.__property('input[name$="-TOTAL_FORMS"]'),r.prototype.maxForms=r.prototype.__property('input[name$="-MAX_NUM_FORMS"]'),a.prototype.getRows=function(){return this.root.querySelectorAll("."+this.opts.formCssClass)},a.prototype.addRow=function(){let e=this.mgmt.totalForms();const o=this.mgmt.maxForms();if(e>=o)return null;const s=this.root.querySelector("."+this.opts.emptyCssClass);if(!s)throw new Error("template form not found");const r=s.cloneNode(!0),a=window.pageYOffset||document.documentElement.scrollTop;r.classList.remove(this.opts.emptyCssClass),s.parentNode.insertBefore(r,s),window.scrollTo({top:a}),"TR"!==r.tagName&&i.b.from(r,{duration:this.opts.animationSpeed/1e3,height:0,clearProps:"all"}),this.mgmt.totalForms(++e),this.addButton.hidden=e>=o;const c=r.querySelector(this.opts.deleteButtonSelector);return c&&(c.hidden=!1),this.opts.onAdded&&this.opts.onAdded.call(this,r,this.opts.prefix,e),this.root.dispatchEvent(new CustomEvent("row-added",{detail:[r,this.opts.prefix]})),n.a.dom.trigger("mutate",[r]),n.a.inlines.trigger("added",[r,this.opts.prefix]),t(document).trigger("formset:added",[t(r),this.opts.prefix]),r},a.prototype.deleteRow=function(e){let o=this.mgmt.totalForms();const s=Array.from(this.getRows()),r=s.indexOf(e);if(this.opts.onRemove)for(let t=r+1;t<s.length;t++)this.opts.onRemove.call(this,s[t],this.opts.prefix,t);n.a.dom.trigger("release",[e]),n.a.inlines.trigger("remove",[e,this.opts.prefix]),"TR"!==e.tagName&&i.b.to(e,{duration:this.opts.animationSpeed/1e3,height:0,onComplete:function(){e.parentNode.removeChild(e)}}),n.a.inlines.trigger("removed",[e,this.opts.prefix]),this.root.dispatchEvent(new CustomEvent("row-removed",{detail:[e,this.opts.prefix]})),t(document).trigger("formset:removed",[t(e),this.opts.prefix]),this.mgmt.totalForms(--o),this.addButton.hidden=o>=this.mgmt.maxForms()},Object(e.a)((function(t=document.body){t.querySelectorAll(".inline-group").forEach((function(t){switch(t.dataset.inlineType){case"stacked":new a(t,{prefix:t.dataset.inlinePrefix,onAdded:function(t,e,o){c(t,e,o),l(t,o)},onRemove:function(t,e,o){c(t,e,o),l(t,o)}});break;case"tabular":new a(t,{prefix:t.dataset.inlinePrefix,onAdded:function(t,e,o){c(t,e,o)},onRemove:function(t,e,o){c(t,e,o)}})}}))}))}).call(this,o(2))},120:function(t,e,o){"use strict";(function(t){var e=o(121),n=o.n(e),i=o(4),s=o(6);function r(t=document.body){let e="textarea[autosize]";t.matches(e)&&n()(t),n()(t.querySelectorAll(e))}Object(i.a)((function(){r(),t(document).on("shown.bs.tab",(function(t){const e=t.target.getAttribute("href"),o=e&&document.querySelector(e);o&&n.a.update(o.querySelectorAll("textarea[autosize]"))}))})),s.a.dom.on("mutate",r),window.paperAdmin=window.paperAdmin||{},Object.assign(window.paperAdmin,{autosize:n()})}).call(this,o(2))},122:function(t,e,o){"use strict";(function(t){var e=o(7),n=o(9),i=o(4);e.b.registerPlugin(n.a);Object(i.a)((function(){const o=document.querySelectorAll(".invalid, .formset-errors, .formset-form-errors"),n=Array.from(o).find((function(t){return""!==t.innerHTML}));if(n){const t=n.getBoundingClientRect().top;t>50&&t<document.documentElement.clientHeight-50||setTimeout((function(){e.b.to(window,{duration:.5,scrollTo:{y:t-Math.floor(document.documentElement.clientHeight/2),offsetY:-25}})}))}else{const e=location.hash.substr(1).replace(/-panel$/i,"-tab"),o=e&&document.querySelector("#"+e);o&&t(o).tab("show")}})),t(document).on("shown.bs.tab",(function(t){const e=t.target.getAttribute("aria-controls");if(e){history.replaceState(null,"","#"+e);const t=document.getElementById("changeform");if(t){const o=new URL(t.action);o.hash=e,t.action=o.toString()}}}))}).call(this,o(2))},123:function(t,e,o){"use strict";(function(t){o(124);var e=o(4),n=o(6);o(125),o(126);function i(e,o){o.closest(".empty-form")||t(o).select2(e)}function s(t=document.body){let e=".admin-autocomplete",o={ajax:{data:function(t){return{term:t.term,page:t.page}}}};t.matches(e)&&i(o,t),t.querySelectorAll(e).forEach(i.bind(null,o))}Object(e.a)(s),n.a.dom.on("mutate",s)}).call(this,o(2))},126:function(t,e,o){},127:function(t,e){document.addEventListener("change",(function(t){const e=t.target;if("INPUT"===e.tagName&&e.closest(".vClearableFileField")){let t=e.value.split("\\").pop(),o=e.nextElementSibling.querySelector("span");o&&(o.textContent=t||o.dataset.initialText)}})),document.addEventListener("focus",(function(t){const e=t.target;"INPUT"===e.tagName&&e.closest(".vClearableFileField")&&e.classList.add("focused")})),document.addEventListener("blur",(function(t){const e=t.target;"INPUT"===e.tagName&&e.closest(".vClearableFileField")&&e.classList.remove("focused")}))},130:function(t,e,o){},131:function(t,e){document.addEventListener("input",(function(t){const e=t.target.closest(".vEmailInput"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".input-group-text");if(n){e.value.trim()?n.href="mailto:"+e.value:n.removeAttribute("href")}}))},132:function(t,e,o){"use strict";(function(t){o(133);var e=o(4),n=o(6);o(134);function i(e){e.closest(".empty-form")||t(e).multiSelect()}function s(t=document.body){let e=".vMultiSelect";t.matches(e)&&i(t),t.querySelectorAll(e).forEach(i)}Object(e.a)(s),n.a.dom.on("mutate",s)}).call(this,o(2))},134:function(t,e,o){},135:function(t,e){document.addEventListener("input",(function(t){const e=t.target.closest(".vURLInput"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".input-group-text");if(n){let t=e.value.trim();t?n.href=t:n.removeAttribute("href")}}))},37:function(t,e,o){"use strict";o.r(e);var n=o(4),i=o(72),s=(o(119),o(14)),r=o(7),a=o(0),c=o(9);function l(t,e){this.opts=Object.assign({speed:1,items:".item",moveUpBtn:".move-up",moveDownBtn:".move-down",disabledClass:"disabled",scrollWindow:!0,scrollMargin:{top:300,bottom:350},ignore:null,onChange:null},e),this.root=t,t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("update:sortbuttons",this.updateBounds.bind(this)),this.updateBounds()}r.b.registerPlugin(c.a),l.prototype._onClick=function(t){const e=t.target,o=e.closest(this.opts.moveUpBtn);if(o&&this.root.contains(o)){if(o.classList.contains(this.opts.disabledClass))return;const e=o.closest(this.opts.items);return void(e&&(t.preventDefault(),t.stopPropagation(),this.moveUp(e)))}const n=e.closest(this.opts.moveDownBtn);if(n&&this.root.contains(n)){if(n.classList.contains(this.opts.disabledClass))return;const e=n.closest(this.opts.items);e&&(t.preventDefault(),t.stopPropagation(),this.moveDown(e))}},l.prototype._findNextItem=function(t){let e=t;for(;e;)if(this.opts.ignore&&e.matches(this.opts.ignore))e=e.nextElementSibling;else{if(e.matches(this.opts.items))break;e=e.nextElementSibling}return e},l.prototype._findPreviousItem=function(t){let e=t;for(;e;)if(this.opts.ignore&&e.matches(this.opts.ignore))e=e.previousElementSibling;else{if(e.matches(this.opts.items))break;e=e.previousElementSibling}return e},l.prototype.moveDown=function(t){const e=this._findNextItem(t.nextElementSibling);e&&this._swap(t,e)},l.prototype.moveUp=function(t){const e=this._findPreviousItem(t.previousElementSibling);e&&this._swap(e,t,!0)},l.prototype._swap=function(t,e,o=!1){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.style.cssText,r=e.style.cssText;this.disableItemButtons(t),this.disableItemButtons(e),e.after(t);const c=i.top-n.top-n.height;t.style.transform=`translate3d(0, ${-i.height-c}px, ${o?0:1}px)`,e.style.transform=`translate3d(0, ${i.top-n.top}px, ${o?1:0}px)`;const l=new a.c({onComplete:function(){t.style.cssText=s,e.style.cssText=r,this.updateBounds()}.bind(this)}).to(t,{duration:this.opts.speed,y:0,clearProps:"all"}).to(e,{duration:this.opts.speed,y:0,clearProps:"all"},0);if(this.opts.scrollWindow){const t=(window.pageYOffset||document.documentElement.scrollTop)+(o?n.top-i.top:i.top-n.top),e=this.opts.scrollMargin.top,s=window.innerHeight-this.opts.scrollMargin.bottom;let r=!0;r&=o?!(n.top>s&&i.top>s):!(n.top<e&&i.top<e),r&&l.to(window,{duration:this.opts.speed,scrollTo:{y:Math.max(0,t)}},0)}"function"==typeof this.opts.onChange&&this.opts.onChange.call(this,t,e)},l.prototype.disableItemButtons=function(t){const e=t.querySelector(this.opts.moveUpBtn),o=t.querySelector(this.opts.moveDownBtn);e.classList.add(this.opts.disabledClass),o.classList.add(this.opts.disabledClass)},l.prototype.updateBounds=function(){const t=this.root.querySelectorAll(this.opts.items);if(!t.length)return;t.forEach(function(t){const e=t.querySelector(this.opts.moveUpBtn),o=t.querySelector(this.opts.moveDownBtn);e.classList.remove(this.opts.disabledClass),o.classList.remove(this.opts.disabledClass)}.bind(this));const e=this._findNextItem(t[0]);if(e){const t=e.querySelector(this.opts.moveUpBtn);t&&t.classList.add(this.opts.disabledClass)}const o=this._findPreviousItem(t[t.length-1]);if(o){const t=o.querySelector(this.opts.moveDownBtn);t&&t.classList.add(this.opts.disabledClass)}};var d=l;Object(n.a)((function(){document.querySelectorAll(".sortable-inline-group").forEach((function(t){const e=new d(t,{speed:"tabular"===t.dataset.inlineType?.25:.5,items:".sortable-item",moveUpBtn:".sortable-move-up",moveDownBtn:".sortable-move-down",ignore:".empty-form"});t.addEventListener("row-added",(function(){e.updateBounds()}))}))})),document.addEventListener("submit",(function(t){t.target.querySelectorAll(".sortable-inline-group").forEach((function(t){!function(t){let e=0;t.querySelectorAll(".sortable-item:not(.empty-form)").forEach((function(t){if(t.classList.contains("has_original")||s.a.containsChangedField(t)){const o=t.querySelector(".sortable-input");o&&(o.value=e++)}}))}(t);const e=t._inline_formset,o="."+e.opts.formCssClass+":not(."+e.opts.emptyCssClass+")";t.querySelectorAll(o).forEach((function(t,o){!function(t,e,o){const n=new RegExp("("+e+"-(\\d+))"),i=e+"-"+o;t.querySelectorAll("*").forEach((function(t){t.htmlFor&&(t.htmlFor=t.htmlFor.replace(n,i)),t.id&&(t.id=t.id.replace(n,i)),t.name&&(t.name=t.name.replace(n,i))})),t.setAttribute("id",e+"-"+o)}(t,e.opts.prefix,o)}))}))}));o(71),o(120),o(122),o(123),o(127);var u=o(128),p=o.n(u),m=o(6);o(129),o(130);function f(t,e){e.closest(".empty-form")||p()(e,t)}function h(t=document.body){let e=".vDatePicker",o={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"};t.matches(e)&&f(o,t),t.querySelectorAll(e).forEach(f.bind(null,o));let n=".vTimePicker",i={allowInput:!0,enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0};t.matches(n)&&f(i,t),t.querySelectorAll(n).forEach(f.bind(null,i))}Object(n.a)(h),m.a.dom.on("mutate",h),document.addEventListener("wheel",(function(t){const e=t.target.closest(".numInputWrapper"),o=e&&e.querySelector("input");if(o){t.preventDefault();const e=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:t.deltaY>0?40:38});o.dispatchEvent(e)}}),{passive:!1}),document.addEventListener("click",(function(t){const e=t.target.closest(".vDateFieldTrigger"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".vDateInput");n&&n._flatpickr&&setTimeout((function(){n._flatpickr.open()}),0)}));o(131),o(132),o(73),o(135);Object(n.a)((function(){const t=document.getElementById("changeform");t&&Object(i.a)(t),window.django_prepopulated_fields&&window.django_prepopulated_fields.length&&Promise.all([o.e(6),o.e(4)]).then(o.bind(null,278))}))},71:function(t,e,o){(function(t){!function(t){"use strict";function e(t){return t=(t=t.replace(/\./g,"__dot__")).replace(/-/g,"__dash__")}function o(t){return t=(t=t.replace(/__dot__/g,".")).replace(/__dash__/g,"-")}function n(t,o,n){let i=t.id.replace(o,"");i=e(i);let s=t.href;n&&(-1===s.indexOf("?")?s+="?_popup=1":s+="&_popup=1");const r=void 0!==window.screenX?window.screenX:window.screenLeft,a=void 0!==window.screenY?window.screenY:window.screenTop,c=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,l=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight,d=a+Math.round((l-600)/2),u=r+Math.round((c-940)/2);return window.open(s,i,"width=940,height=600,top="+d+",left="+u+",resizable=yes,scrollbars=yes").focus(),!1}function i(t){return n(t,/^lookup_/,!0)}function s(t){return n(t,/^(change|add|delete)_/,!1)}function r(e){const o=t(e),n=o.closest(".related-widget-wrapper").find(".view-related, .change-related, .delete-related");if(!n.length)return;const i=o.val();i?n.each((function(){const e=t(this);e.attr("href",e.attr("data-href-template").replace("__fk__",i))})):n.removeAttr("href")}function a(e,n,i){const s=o(e.name),r=document.getElementById(s);if(r){const e=r.nodeName.toUpperCase();"SELECT"===e?r.options[r.options.length]=new Option(i,n,!0,!0):"INPUT"===e&&(-1!==r.className.indexOf("vManyToManyRawIdAdminField")&&r.value?r.value+=","+n:r.value=n),t(r).trigger("change")}e.close()}window.id_to_windowname=e,window.windowname_to_id=o,window.showRelatedObjectLookupPopup=i,window.dismissRelatedLookupPopup=function(t,e){const n=o(t.name),i=document.getElementById(n);-1!==i.className.indexOf("vManyToManyRawIdAdminField")&&i.value?i.value+=","+e:document.getElementById(n).value=e,t.close()},window.showRelatedObjectPopup=s,window.updateRelatedObjectLinks=r,window.dismissAddRelatedObjectPopup=a,window.dismissChangeRelatedObjectPopup=function(e,n,i,s){const r=o(e.name).replace(/^edit_/,"");t("#"+r).find("option").each((function(){this.value===n&&(this.textContent=i,this.value=s)})),e.close()},window.dismissDeleteRelatedObjectPopup=function(e,n){const i=o(e.name).replace(/^delete_/,"");t("#"+i).find("option").each((function(){this.value===n&&t(this).remove()})).trigger("change"),e.close()},window.showAddAnotherPopup=s,window.dismissAddAnotherPopup=a,t(document).ready((function(){t("a[data-popup-opener]").on("click",(function(e){e.preventDefault(),opener.dismissRelatedLookupPopup(window,t(this).data("popup-opener"))})),t("body").on("click",".related-widget-wrapper-link",(function(e){if(e.preventDefault(),this.href){const e=t.Event("django:show-related",{href:this.href});t(this).trigger(e),e.isDefaultPrevented()||s(this)}})).on("change",".related-widget-wrapper select",(function(){const e=t.Event("django:update-related");t(this).trigger(e),e.isDefaultPrevented()||r(this)})).on("change",".related-widget-wrapper input",(function(){this.checked&&r(this)})).on("click",".related-lookup",(function(e){e.preventDefault();const o=t.Event("django:lookup-related");t(this).trigger(o),o.isDefaultPrevented()||i(this)})),t(".related-widget-wrapper select").trigger("change"),t(".related-widget-wrapper input:checked").trigger("change")}))}(t)}).call(this,o(2))},72:function(t,e,o){"use strict";function n(t){let e=!1,o=!1;t.addEventListener("submit",(function(){e=!0}));const n=gettext("You have unsaved changes");function i(){document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i),t.addEventListener("change",(function e(n){t.removeEventListener("change",e);const i=n.target,s=i.closest(".form-widget");!(null!==i.closest('[data-hook-unload="prevent"]'))&&s&&t.contains(s)&&(o=!0)}))}window.addEventListener("beforeunload",(function(t){if(!e&&o)return t.returnValue=n,n})),document.addEventListener("keydown",i),document.addEventListener("mousedown",i)}o.d(e,"a",(function(){return n}))},73:function(t,e){document.addEventListener("click",(function(t){const e=t.target.closest(".vPasswordTrigger");if(e){const t=e.closest(".input-group"),o=t&&t.querySelector("i.fa"),n=t&&t.querySelector("input");if(n){const t=["fa-eye-slash","fa-eye"],e=["text","password"],i=(e.indexOf(n.type)+1)%2;n.type=e[i],o.classList.add(t[i]),o.classList.remove(t[(i+1)%2])}}}))}}]);
//# sourceMappingURL=changeform.chunk.min.js.map
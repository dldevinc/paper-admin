(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{108:function(t,e,o){"use strict";(function(t){var e=o(3),n=o(7);function i(t){this.element=t}function s(t,e){if(this.opts=Object.assign({prefix:"form",addButtonSelector:".add-row",deleteButtonSelector:".delete-row",formCssClass:"inline-related",emptyCssClass:"empty-form",onAdded:null,onRemove:null},e),this.root=t,this.mgmt=new i(t),this.addButton=this.root.querySelector(this.opts.addButtonSelector),!this.addButton)throw new Error("addButton not found");this.addButton.hidden=this.mgmt.totalForms()>=this.mgmt.maxForms(),this.addButton.querySelector("a, button").addEventListener("click",function(t){t.preventDefault(),this.addRow()}.bind(this));const o=this;this.root.addEventListener("click",(function(t){const e=t.target;if(e.closest(o.opts.deleteButtonSelector)){t.preventDefault();const n=e.closest("."+o.opts.formCssClass);o.deleteRow(n)}}))}function r(t,e,o){const n=new RegExp("("+e+"-(\\d+|__prefix__))"),i=e+"-"+(o-1);t.querySelectorAll("*").forEach((function(t){t.htmlFor&&(t.htmlFor=t.htmlFor.replace(n,i)),t.id&&(t.id=t.id.replace(n,i)),t.name&&(t.name=t.name.replace(n,i))})),t.setAttribute("id",e+"-"+(o-1))}function a(t,e){const o=t.querySelector(".inline-label");o&&(o.innerHTML=o.innerHTML.replace(/(#\d+)/g,"#"+e))}i.prototype.__property=function(t){return function(e){const o=this.element.querySelector(t);if(void 0===e)return parseInt(o.value.toString());e=parseInt(e),isNaN(e)||(o.value=e)}},i.prototype.totalForms=i.prototype.__property('input[name$="-TOTAL_FORMS"]'),i.prototype.maxForms=i.prototype.__property('input[name$="-MAX_NUM_FORMS"]'),s.prototype.getRows=function(){return this.root.querySelectorAll("."+this.opts.formCssClass)},s.prototype.addRow=function(){let e=this.mgmt.totalForms();const o=this.mgmt.maxForms();if(e>=o)return null;const i=this.root.querySelector("."+this.opts.emptyCssClass);if(!i)throw new Error("template form not found");const s=i.cloneNode(!0);s.classList.remove(this.opts.emptyCssClass),i.parentNode.insertBefore(s,i),this.mgmt.totalForms(++e),this.addButton.hidden=e>=o;const r=s.querySelector(this.opts.deleteButtonSelector);return r&&(r.hidden=!1),this.opts.onAdded&&this.opts.onAdded.call(this,s,this.opts.prefix,e),n.a.dom.trigger("mutate",[s]),n.a.inlines.trigger("added",[s,this.opts.prefix]),t(document).trigger("formset:added",[t(s),this.opts.prefix]),s},s.prototype.deleteRow=function(e){let o=this.mgmt.totalForms();const i=Array.from(this.getRows()),s=i.indexOf(e);if(this.opts.onRemove)for(let t=s+1;t<i.length;t++)this.opts.onRemove.call(this,i[t],this.opts.prefix,t);n.a.dom.trigger("release",[e]),n.a.inlines.trigger("remove",[e,this.opts.prefix]),e.parentNode.removeChild(e),n.a.inlines.trigger("removed",[e,this.opts.prefix]),t(document).trigger("formset:removed",[t(e),this.opts.prefix]),this.mgmt.totalForms(--o),this.addButton.hidden=o>=this.mgmt.maxForms()},Object(e.a)((function(t=document.body){t.querySelectorAll(".inline-group").forEach((function(t){switch(t.dataset.inlineType){case"stacked":new s(t,{prefix:t.dataset.inlinePrefix,onAdded:function(t,e,o){r(t,e,o),a(t,o)},onRemove:function(t,e,o){r(t,e,o),a(t,o)}});break;case"tabular":new s(t,{prefix:t.dataset.inlinePrefix,onAdded:function(t,e,o){r(t,e,o)},onRemove:function(t,e,o){r(t,e,o)}})}}))}))}).call(this,o(1))},109:function(t,e,o){"use strict";(function(t){var e=o(110),n=o.n(e),i=o(3),s=o(7);function r(t=document.body){t.matches("textarea[autosize]")&&n()(t),n()(t.querySelectorAll("textarea[autosize]"))}Object(i.a)((function(){r(),t(document).on("shown.bs.tab",(function(t){const e=t.target.getAttribute("href"),o=e&&document.querySelector(e);o&&n.a.update(o.querySelectorAll("textarea[autosize]"))}))})),s.a.dom.on("mutate",r),window.paperAdmin=window.paperAdmin||{},Object.assign(window.paperAdmin,{autosize:n()})}).call(this,o(1))},111:function(t,e,o){"use strict";(function(t){var e=o(10),n=o(3);Object(n.a)((function(){const o=document.querySelectorAll(".invalid, .formset-errors, .formset-form-errors"),n=Array.from(o).find((function(t){return""!==t.innerHTML}));if(n){const t=n.getBoundingClientRect().top;t>50&&t<document.documentElement.clientHeight-50||setTimeout((function(){e.b.to(window,.5,{scrollTo:{y:t-Math.floor(document.documentElement.clientHeight/2),offsetY:-25}})}))}else{const e=location.hash.substr(1).replace(/-panel$/i,"-tab"),o=e&&document.querySelector(`#${e}`);o&&t(o).tab("show")}})),t(document).on("shown.bs.tab",(function(t){const e=t.target.getAttribute("aria-controls");if(e){history.replaceState(null,"",`#${e}`);const t=document.getElementById("changeform");if(t){const o=new URL(t.action);o.hash=e,t.action=o.toString()}}}))}).call(this,o(1))},112:function(t,e,o){"use strict";(function(t){o(113);var e=o(3),n=o(7);o(114),o(115);function i(e,o){o.closest(".empty-form")||t(o).select2(e)}function s(t=document.body){let e={ajax:{data:function(t){return{term:t.term,page:t.page}}}};t.matches(".admin-autocomplete")&&i(e,t),t.querySelectorAll(".admin-autocomplete").forEach(i.bind(null,e))}Object(e.a)(s),n.a.dom.on("mutate",s)}).call(this,o(1))},115:function(t,e,o){},116:function(t,e){document.addEventListener("change",(function(t){const e=t.target;if("INPUT"===e.tagName&&e.closest(".vClearableFileField")){let t=e.value.split("\\").pop(),o=e.nextElementSibling.querySelector("span");o&&(o.textContent=t||o.dataset.initialText)}})),document.addEventListener("focus",(function(t){const e=t.target;"INPUT"===e.tagName&&e.closest(".vClearableFileField")&&e.classList.add("focused")})),document.addEventListener("blur",(function(t){const e=t.target;"INPUT"===e.tagName&&e.closest(".vClearableFileField")&&e.classList.remove("focused")}))},119:function(t,e,o){},120:function(t,e){document.addEventListener("input",(function(t){const e=t.target.closest(".vEmailInput"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".input-group-text");if(n){e.value.trim()?n.href="mailto:"+e.value:n.removeAttribute("href")}}))},121:function(t,e,o){"use strict";(function(t){o(122);var e=o(3),n=o(7);o(123);function i(e){e.closest(".empty-form")||t(e).multiSelect()}function s(t=document.body){t.matches(".vMultiSelect")&&i(t),t.querySelectorAll(".vMultiSelect").forEach(i)}Object(e.a)(s),n.a.dom.on("mutate",s)}).call(this,o(1))},123:function(t,e,o){},124:function(t,e){document.addEventListener("input",(function(t){const e=t.target.closest(".vURLInput"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".input-group-text");if(n){let t=e.value.trim();t?n.href=t:n.removeAttribute("href")}}))},38:function(t,e,o){"use strict";o.r(e);var n=o(3),i=o(67),s=(o(108),o(14)),r=o(10);function a(t,e){this.opts=Object.assign({speed:1,items:".item",moveUpBtn:".move-up",moveDownBtn:".move-down",disabledClass:"disabled",ignore:null,onChange:null},e),this.root=t,t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("update:sortbuttons",this.updateBounds.bind(this)),this.updateBounds()}a.prototype._onClick=function(t){const e=t.target,o=e.closest(this.opts.moveUpBtn);if(o&&this.root.contains(o)){if(o.classList.contains(this.opts.disabledClass))return;const e=o.closest(this.opts.items);return void(e&&(t.preventDefault(),t.stopPropagation(),this.moveUp(e)))}const n=e.closest(this.opts.moveDownBtn);if(n&&this.root.contains(n)){if(n.classList.contains(this.opts.disabledClass))return;const e=n.closest(this.opts.items);e&&(t.preventDefault(),t.stopPropagation(),this.moveDown(e))}},a.prototype._findNextSince=function(t){for(;t&&(!t.matches(this.opts.items)||this.opts.ignore&&t.matches(this.opts.ignore));)t=t.nextElementSibling;return t},a.prototype.moveDown=function(t){const e=this._findNextSince(t.nextElementSibling);e&&this._swap(t,e)},a.prototype._findPreviousSince=function(t){for(;t&&(!t.matches(this.opts.items)||this.opts.ignore&&t.matches(this.opts.ignore));)t=t.previousElementSibling;return t},a.prototype.moveUp=function(t){const e=this._findPreviousSince(t.previousElementSibling);e&&this._swap(e,t,!0)},a.prototype._getPosition=function(t){const e=t.getBoundingClientRect(),o=window.getComputedStyle(t);let n=t.offsetParent||document.documentElement;const i=window.getComputedStyle(n);return{top:t.offsetTop-parseInt(i.borderTopWidth)-parseInt(o.marginTop),left:t.offsetLeft-parseInt(i.borderLeftWidth)-parseInt(o.marginLeft),width:e.width,height:e.height}},a.prototype._swap=function(t,e,o=!1){const n=this._getPosition(t),i=this._getPosition(e),s=t.style.cssText,a=e.style.cssText;this.disableItemButtons(t),this.disableItemButtons(e),e.after(t);const c=i.top-n.top-n.height;t.style.transform=`translate3d(0, ${-i.height-c}px, ${o?0:1}px)`,e.style.transform=`translate3d(0, ${i.top-n.top}px, ${o?1:0}px)`,new r.a({onComplete:function(){t.style.cssText=s,e.style.cssText=a,this.updateBounds()}.bind(this)}).to(t,this.opts.speed,{y:0,clearProps:"all"}).to(e,this.opts.speed,{y:0,clearProps:"all"},0),"function"==typeof this.opts.onChange&&this.opts.onChange.call(this,t,e)},a.prototype.disableItemButtons=function(t){const e=t.querySelector(this.opts.moveUpBtn),o=t.querySelector(this.opts.moveDownBtn);e.classList.add(this.opts.disabledClass),o.classList.add(this.opts.disabledClass)},a.prototype.updateBounds=function(){const t=this.root.querySelectorAll(this.opts.items);if(!t.length)return;t.forEach(function(t){const e=t.querySelector(this.opts.moveUpBtn),o=t.querySelector(this.opts.moveDownBtn);e.classList.remove(this.opts.disabledClass),o.classList.remove(this.opts.disabledClass)}.bind(this));const e=this._findNextSince(t[0]);if(e){const t=e.querySelector(this.opts.moveUpBtn);t&&t.classList.add(this.opts.disabledClass)}const o=this._findPreviousSince(t[t.length-1]);if(o){const t=o.querySelector(this.opts.moveDownBtn);t&&t.classList.add(this.opts.disabledClass)}};var c=a;Object(n.a)((function(){document.querySelectorAll(".sortable-inline-group").forEach((function(t){new c(t,{speed:"tabular"===t.dataset.inlineType?.25:.5,items:".sortable-item",moveUpBtn:".sortable-move-up",moveDownBtn:".sortable-move-down",ignore:".empty-form"})}))})),document.addEventListener("submit",(function(t){t.target.querySelectorAll(".sortable-inline-group").forEach((function(t){!function(t){let e=0;t.querySelectorAll(".sortable-item:not(.empty-form)").forEach((function(t){if(t.classList.contains("has_original")||s.a.containsChangedField(t)){const o=t.querySelector(".sortable-input");o&&(o.value=e++)}}))}(t)}))}));o(66),o(109),o(111),o(112),o(116);var l=o(117),d=o.n(l),u=o(7);o(118),o(119);function p(t,e){e.closest(".empty-form")||d()(e,t)}function m(t=document.body){let e={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"};t.matches(".vDatePicker")&&p(e,t),t.querySelectorAll(".vDatePicker").forEach(p.bind(null,e));let o={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0};t.matches(".vTimePicker")&&p(o,t),t.querySelectorAll(".vTimePicker").forEach(p.bind(null,o))}Object(n.a)(m),u.a.dom.on("mutate",m),document.addEventListener("wheel",(function(t){const e=t.target.closest(".numInputWrapper"),o=e&&e.querySelector("input");if(o){t.preventDefault();const e=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:t.deltaY>0?40:38});o.dispatchEvent(e)}})),document.addEventListener("click",(function(t){const e=t.target.closest(".vDateFieldTrigger"),o=e&&e.closest(".input-group"),n=o&&o.querySelector(".vDateInput");n&&n._flatpickr&&(t.preventDefault(),n._flatpickr.open())}));o(120),o(121),o(68),o(124);Object(n.a)((function(){const t=document.getElementById("changeform");t&&Object(i.a)(t),window.django_prepopulated_fields&&window.django_prepopulated_fields.length&&Promise.all([o.e(6),o.e(4)]).then(o.bind(null,236))}))},66:function(t,e,o){(function(t){!function(t){"use strict";function e(t){return t=(t=t.replace(/\./g,"__dot__")).replace(/-/g,"__dash__")}function o(t){return t=(t=t.replace(/__dot__/g,".")).replace(/__dash__/g,"-")}function n(t,o,n){let i=t.id.replace(o,"");i=e(i);let s=t.href;n&&(-1===s.indexOf("?")?s+="?_popup=1":s+="&_popup=1");const r=void 0!==window.screenX?window.screenX:window.screenLeft,a=void 0!==window.screenY?window.screenY:window.screenTop,c=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,l=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight,d=a+Math.round((l-600)/2),u=r+Math.round((c-940)/2);return window.open(s,i,"width=940,height=600,top="+d+",left="+u+",resizable=yes,scrollbars=yes").focus(),!1}function i(t){return n(t,/^lookup_/,!0)}function s(t){return n(t,/^(change|add|delete)_/,!1)}function r(e){const o=t(e),n=o.closest(".related-widget-wrapper").find(".view-related, .change-related, .delete-related");if(!n.length)return;const i=o.val();i?n.each((function(){const e=t(this);e.attr("href",e.attr("data-href-template").replace("__fk__",i))})):n.removeAttr("href")}function a(e,n,i){const s=o(e.name),r=document.getElementById(s);if(r){const e=r.nodeName.toUpperCase();"SELECT"===e?r.options[r.options.length]=new Option(i,n,!0,!0):"INPUT"===e&&(-1!==r.className.indexOf("vManyToManyRawIdAdminField")&&r.value?r.value+=","+n:r.value=n),t(r).trigger("change")}e.close()}window.id_to_windowname=e,window.windowname_to_id=o,window.showRelatedObjectLookupPopup=i,window.dismissRelatedLookupPopup=function(t,e){const n=o(t.name),i=document.getElementById(n);-1!==i.className.indexOf("vManyToManyRawIdAdminField")&&i.value?i.value+=","+e:document.getElementById(n).value=e,t.close()},window.showRelatedObjectPopup=s,window.updateRelatedObjectLinks=r,window.dismissAddRelatedObjectPopup=a,window.dismissChangeRelatedObjectPopup=function(e,n,i,s){const r=o(e.name).replace(/^edit_/,"");t("#"+r).find("option").each((function(){this.value===n&&(this.textContent=i,this.value=s)})),e.close()},window.dismissDeleteRelatedObjectPopup=function(e,n){const i=o(e.name).replace(/^delete_/,"");t("#"+i).find("option").each((function(){this.value===n&&t(this).remove()})).trigger("change"),e.close()},window.showAddAnotherPopup=s,window.dismissAddAnotherPopup=a,t(document).ready((function(){t("a[data-popup-opener]").on("click",(function(e){e.preventDefault(),opener.dismissRelatedLookupPopup(window,t(this).data("popup-opener"))})),t("body").on("click",".related-widget-wrapper-link",(function(e){if(e.preventDefault(),this.href){const e=t.Event("django:show-related",{href:this.href});t(this).trigger(e),e.isDefaultPrevented()||s(this)}})).on("change",".related-widget-wrapper select",(function(){const e=t.Event("django:update-related");t(this).trigger(e),e.isDefaultPrevented()||r(this)})).on("change",".related-widget-wrapper input",(function(){this.checked&&r(this)})).on("click",".related-lookup",(function(e){e.preventDefault();const o=t.Event("django:lookup-related");t(this).trigger(o),o.isDefaultPrevented()||i(this)})),t(".related-widget-wrapper select").trigger("change"),t(".related-widget-wrapper input:checked").trigger("change")}))}(t)}).call(this,o(1))},67:function(t,e,o){"use strict";function n(t){let e=!1,o=!1;t.addEventListener("submit",(function(){e=!0}));const n=gettext("You have unsaved changes");function i(){document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i),t.addEventListener("change",(function e(n){t.removeEventListener("change",e);const i=n.target.closest(".form-widget");i&&t.contains(i)&&(o=!0)}))}window.addEventListener("beforeunload",(function(t){if(!e&&o)return t.returnValue=n,n})),document.addEventListener("keydown",i),document.addEventListener("mousedown",i)}o.d(e,"a",(function(){return n}))},68:function(t,e){document.addEventListener("click",(function(t){const e=t.target.closest(".vPasswordTrigger");if(e){const t=e.closest(".input-group"),o=t&&t.querySelector("input");if(o){const t=["text","password"],e=(t.indexOf(o.type)+1)%2;o.type=t[e]}}}))}}]);
//# sourceMappingURL=changeform.chunk.min.js.map
{"version":3,"sources":["webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/SortButtons.js","webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/sortable.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/datetime.js","webpack:///./paper_admin/static/paper_admin/src/js/changeform.js","webpack:///./paper_admin/static/paper_admin/src/js/components/RelatedObjectLookups.js","webpack:///./paper_admin/static/paper_admin/src/js/components/hook_unload.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/password.js","webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/inlines.js","webpack:///./paper_admin/static/paper_admin/src/js/components/autosize.js","webpack:///./paper_admin/static/paper_admin/src/js/components/tabs.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/autocomplete.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/clearable_file.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/email.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/multiselect.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/url.js"],"names":["SortButtons","root","options","this","opts","Object","assign","speed","items","moveUpBtn","moveDownBtn","disabledClass","ignore","onChange","addEventListener","_onClick","bind","updateBounds","prototype","event","target","moveUpButton","closest","contains","classList","item","preventDefault","stopPropagation","moveUp","moveDownButton","moveDown","_findNextSince","elem","matches","nextElementSibling","next","_swap","_findPreviousSince","previousElementSibling","prev","_getPosition","elemRect","getBoundingClientRect","elemStyles","window","getComputedStyle","offsetParent","document","documentElement","parentStyles","top","offsetTop","parseInt","borderTopWidth","marginTop","left","offsetLeft","borderLeftWidth","marginLeft","width","height","elem1","elem2","highlightSecond","rect1","rect2","initialCSSText1","style","cssText","initialCSSText2","disableItemButtons","after","spaceY","transform","TimelineLite","onComplete","to","y","clearProps","call","upBtn","querySelector","downBtn","add","querySelectorAll","length","forEach","remove","firstItem","firstItemBtn","lastItem","lastItemBtn","whenDomReady","inlineGroup","dataset","inlineType","currentOrder","inlineForm","formUtils","containsChangedField","input","value","fillInlineOrder","initWidget","element","flatpickr","initWidgets","body","date_options","altInput","altFormat","dateFormat","time_options","enableTime","noCalendar","time_24hr","emitters","dom","on","widget","fake_event","KeyboardEvent","bubbles","cancelable","keyCode","deltaY","dispatchEvent","button","_flatpickr","open","form","getElementById","hookUnload","django_prepopulated_fields","$","id_to_windowname","text","replace","windowname_to_id","showAdminPopup","triggeringLink","name_regexp","add_popup","name","id","href","indexOf","browser_left","screenX","screenLeft","browser_top","screenY","screenTop","browser_width","outerWidth","clientWidth","browser_height","outerHeight","clientHeight","top_position","Math","round","left_position","focus","showRelatedObjectLookupPopup","showRelatedObjectPopup","updateRelatedObjectLinks","$this","siblings","find","val","each","elm","attr","removeAttr","dismissAddRelatedObjectPopup","win","newId","newRepr","elemName","nodeName","toUpperCase","Option","className","trigger","close","dismissRelatedLookupPopup","chosenId","dismissChangeRelatedObjectPopup","objId","textContent","dismissDeleteRelatedObjectPopup","showAddAnotherPopup","dismissAddAnotherPopup","ready","opener","data","e","Event","isDefaultPrevented","checked","jQuery","submit","formHasChanged","message","gettext","userActionHandler","removeEventListener","changeHandler","evt","returnValue","toggler","field","toggles","index","type","ManagementForm","Formset","prefix","addButtonSelector","deleteButtonSelector","formCssClass","emptyCssClass","onAdded","onRemove","mgmt","addButton","Error","hidden","totalForms","maxForms","addRow","that","row","deleteRow","updateFormIndex","regex","RegExp","replacement","htmlFor","setAttribute","updateInlineLabel","label","innerHTML","__property","selector","toString","isNaN","getRows","templateElement","cloneNode","parentNode","insertBefore","deleteButton","inlines","rows","Array","from","row_index","i","removeChild","inlinePrefix","initAutosize","autosize","tab_selector","getAttribute","tab_pane","update","paperAdmin","errorContainers","firstErrorContainer","errorContainer","errorTop","setTimeout","TweenLite","scrollTo","floor","offsetY","hash","location","substr","current_tab","tab","tab_name","history","replaceState","action","URL","select2","ajax","params","term","page","tagName","fileName","split","pop","buttonName","initialText","link_tag","trim","removeAttribute","multiSelect","link"],"mappings":"2IAwBA,SAASA,EAAYC,EAAMC,GAEvBC,KAAKC,KAAOC,OAAOC,OAAO,CACtBC,MAAO,EACPC,MAAO,QACPC,UAAW,WACXC,YAAa,aACbC,cAAe,WACfC,OAAQ,KACRC,SAAU,MACXX,GAGHC,KAAKF,KAAOA,EAEZA,EAAKa,iBAAiB,QAASX,KAAKY,SAASC,KAAKb,OAClDF,EAAKa,iBAAiB,qBAAsBX,KAAKc,aAAaD,KAAKb,OACnEA,KAAKc,eAQTjB,EAAYkB,UAAUH,SAAW,SAASI,GACtC,MAAMC,EAASD,EAAMC,OAEfC,EAAeD,EAAOE,QAAQnB,KAAKC,KAAKK,WAC9C,GAAIY,GAAgBlB,KAAKF,KAAKsB,SAASF,GAAe,CAClD,GAAIA,EAAaG,UAAUD,SAASpB,KAAKC,KAAKO,eAC1C,OAGJ,MAAMc,EAAOJ,EAAaC,QAAQnB,KAAKC,KAAKI,OAM5C,YALIiB,IACAN,EAAMO,iBACNP,EAAMQ,kBACNxB,KAAKyB,OAAOH,KAKpB,MAAMI,EAAiBT,EAAOE,QAAQnB,KAAKC,KAAKM,aAChD,GAAImB,GAAkB1B,KAAKF,KAAKsB,SAASM,GAAiB,CACtD,GAAIA,EAAeL,UAAUD,SAASpB,KAAKC,KAAKO,eAC5C,OAGJ,MAAMc,EAAOI,EAAeP,QAAQnB,KAAKC,KAAKI,OAC1CiB,IACAN,EAAMO,iBACNP,EAAMQ,kBACNxB,KAAK2B,SAASL,MAW1BzB,EAAYkB,UAAUa,eAAiB,SAASC,GAC5C,KAAOA,KAAUA,EAAKC,QAAQ9B,KAAKC,KAAKI,QAAWL,KAAKC,KAAKQ,QAAUoB,EAAKC,QAAQ9B,KAAKC,KAAKQ,UAC1FoB,EAAOA,EAAKE,mBAEhB,OAAOF,GAOXhC,EAAYkB,UAAUY,SAAW,SAASL,GACtC,MAAMU,EAAOhC,KAAK4B,eAAeN,EAAKS,oBAClCC,GACAhC,KAAKiC,MAAMX,EAAMU,IAUzBnC,EAAYkB,UAAUmB,mBAAqB,SAASL,GAChD,KAAOA,KAAUA,EAAKC,QAAQ9B,KAAKC,KAAKI,QAAWL,KAAKC,KAAKQ,QAAUoB,EAAKC,QAAQ9B,KAAKC,KAAKQ,UAC1FoB,EAAOA,EAAKM,uBAEhB,OAAON,GAOXhC,EAAYkB,UAAUU,OAAS,SAASH,GACpC,MAAMc,EAAOpC,KAAKkC,mBAAmBZ,EAAKa,wBACtCC,GACApC,KAAKiC,MAAMG,EAAMd,GAAM,IAW/BzB,EAAYkB,UAAUsB,aAAe,SAASR,GAC1C,MAAMS,EAAWT,EAAKU,wBAChBC,EAAaC,OAAOC,iBAAiBb,GAE3C,IAAIc,EAAed,EAAKc,cAAgBC,SAASC,gBACjD,MAAMC,EAAeL,OAAOC,iBAAiBC,GAE7C,MAAO,CACHI,IAAKlB,EAAKmB,UAAYC,SAASH,EAAaI,gBAAkBD,SAAST,EAAWW,WAClFC,KAAMvB,EAAKwB,WAAaJ,SAASH,EAAaQ,iBAAmBL,SAAST,EAAWe,YACrFC,MAAOlB,EAASkB,MAChBC,OAAQnB,EAASmB,SAWzB5D,EAAYkB,UAAUkB,MAAQ,SAASyB,EAAOC,EAAOC,GAAgB,GAajE,MAAMC,EAAQ7D,KAAKqC,aAAaqB,GAC1BI,EAAQ9D,KAAKqC,aAAasB,GAC1BI,EAAkBL,EAAMM,MAAMC,QAC9BC,EAAkBP,EAAMK,MAAMC,QAEpCjE,KAAKmE,mBAAmBT,GACxB1D,KAAKmE,mBAAmBR,GACxBA,EAAMS,MAAMV,GAGZ,MAAMW,EAASP,EAAMf,IAAMc,EAAMd,IAAMc,EAAMJ,OAC7CC,EAAMM,MAAMM,6BAA+BR,EAAML,OAASY,QAAaT,EAAkB,EAAI,OAC7FD,EAAMK,MAAMM,4BAA8BR,EAAMf,IAAMc,EAAMd,UAAUa,EAAkB,EAAI,OAE5F,IAAIW,IAAa,CACbC,WAAY,WACRd,EAAMM,MAAMC,QAAUF,EACtBJ,EAAMK,MAAMC,QAAUC,EACtBlE,KAAKc,gBACPD,KAAKb,QAEVyE,GAAGf,EAAO1D,KAAKC,KAAKG,MAAO,CAACsE,EAAG,EAAGC,WAAY,QAC9CF,GAAGd,EAAO3D,KAAKC,KAAKG,MAAO,CAACsE,EAAG,EAAGC,WAAY,OAAQ,GAGrB,mBAAvB3E,KAAKC,KAAKS,UACjBV,KAAKC,KAAKS,SAASkE,KAAK5E,KAAM0D,EAAOC,IAQ7C9D,EAAYkB,UAAUoD,mBAAqB,SAAS7C,GAChD,MAAMuD,EAAQvD,EAAKwD,cAAc9E,KAAKC,KAAKK,WACrCyE,EAAUzD,EAAKwD,cAAc9E,KAAKC,KAAKM,aAC7CsE,EAAMxD,UAAU2D,IAAIhF,KAAKC,KAAKO,eAC9BuE,EAAQ1D,UAAU2D,IAAIhF,KAAKC,KAAKO,gBAMpCX,EAAYkB,UAAUD,aAAe,WACjC,MAAMT,EAAQL,KAAKF,KAAKmF,iBAAiBjF,KAAKC,KAAKI,OACnD,IAAKA,EAAM6E,OACP,OAGJ7E,EAAM8E,QAAQ,SAAS7D,GACnB,MAAMuD,EAAQvD,EAAKwD,cAAc9E,KAAKC,KAAKK,WACrCyE,EAAUzD,EAAKwD,cAAc9E,KAAKC,KAAKM,aAC7CsE,EAAMxD,UAAU+D,OAAOpF,KAAKC,KAAKO,eACjCuE,EAAQ1D,UAAU+D,OAAOpF,KAAKC,KAAKO,gBACrCK,KAAKb,OAEP,MAAMqF,EAAYrF,KAAK4B,eAAevB,EAAM,IAC5C,GAAIgF,EAAW,CACX,MAAMC,EAAeD,EAAUP,cAAc9E,KAAKC,KAAKK,WACnDgF,GACAA,EAAajE,UAAU2D,IAAIhF,KAAKC,KAAKO,eAI7C,MAAM+E,EAAWvF,KAAKkC,mBAAmB7B,EAAMA,EAAM6E,OAAS,IAC9D,GAAIK,EAAU,CACV,MAAMC,EAAcD,EAAST,cAAc9E,KAAKC,KAAKM,aACjDiF,GACAA,EAAYnE,UAAU2D,IAAIhF,KAAKC,KAAKO,iBAMjCX,QClPf4F,aAAa,WACY7C,SAASqC,iBAAiB,0BAClCE,SAAQ,SAASO,GAC1B,IAAI7F,EAAY6F,EAAa,CACzBtF,MAA0C,YAAnCsF,EAAYC,QAAQC,WAA2B,IAAO,GAC7DvF,MAAO,iBACPC,UAAW,oBACXC,YAAa,sBACbE,OAAQ,sBAyBpBmC,SAASjC,iBAAiB,UAAU,SAASK,GAC5BA,EAAMC,OACOgE,iBAAiB,0BAC9BE,SAAQ,SAASO,IAlBlC,SAAyBA,GACrB,IAAIG,EAAe,EACCH,EAAYT,iBAAiB,mCACrCE,SAAQ,SAASW,GACzB,GAAIA,EAAWzE,UAAUD,SAAS,iBAC3B2E,IAAUC,qBAAqBF,GAAa,CAC/C,MAAMG,EAAQH,EAAWhB,cAAc,mBACnCmB,IACAA,EAAMC,MAAQL,SAWtBM,CAAgBT,S,sECjCxB,SAASU,EAAWrG,EAASsG,GACpBA,EAAQlF,QAAQ,gBACjBmF,IAAUD,EAAStG,GAS3B,SAASwG,EAAYzG,EAAO8C,SAAS4D,MACjC,IACIC,EAAe,CACfC,UAAU,EACVC,UAAW,SACXC,WAAY,SAEhB9G,EAAKgC,QANe,iBAMWsE,EAAWK,EAAc3G,GACxDA,EAAKmF,iBAPe,gBAOiBE,QAAQiB,EAAWvF,KAAK,KAAM4F,IAEnE,IACII,EAAe,CACfC,YAAY,EACZC,YAAY,EACZH,WAAY,MACZI,WAAW,GAEflH,EAAKgC,QAPe,iBAOWsE,EAAWS,EAAc/G,GACxDA,EAAKmF,iBARe,gBAQiBE,QAAQiB,EAAWvF,KAAK,KAAMgG,IAIvEpB,YAAac,GACbU,IAASC,IAAIC,GAAG,SAAUZ,GAM1B3D,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MACMoG,EADSpG,EAAMC,OACCE,QAAQ,oBACxB8E,EAAQmB,GAAUA,EAAOtC,cAAc,SAC7C,GAAImB,EAAO,CACPjF,EAAMO,iBACN,MAAM8F,EAAa,IAAIC,cAAc,UAAW,CAC5CC,SAAS,EACTC,YAAY,EACZC,QAASzG,EAAM0G,OAAS,EAAI,GAAK,KAErCzB,EAAM0B,cAAcN,OAQ5BzE,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MACM4G,EADS5G,EAAMC,OACCE,QAAQ,sBACxBiG,EAASQ,GAAUA,EAAOzG,QAAQ,gBAClC8E,EAAQmB,GAAUA,EAAOtC,cAAc,eACzCmB,GAASA,EAAM4B,aACf7G,EAAMO,iBACN0E,EAAM4B,WAAWC,W,wBCzDzBrC,aAAa,WAET,MAAMsC,EAAOnF,SAASoF,eAAe,cACjCD,GACAE,YAAWF,GAIXtF,OAAOyF,4BAA8BzF,OAAOyF,2BAA2BhD,QACvE,wD,oBC3BR,aAGA,SAAUiD,GACN,aAMA,SAASC,EAAiBC,GAGtB,OADAA,GADAA,EAAOA,EAAKC,QAAQ,MAAO,YACfA,QAAQ,KAAM,YAI9B,SAASC,EAAiBF,GAGtB,OADAA,GADAA,EAAOA,EAAKC,QAAQ,WAAY,MACpBA,QAAQ,YAAa,KAIrC,SAASE,EAAeC,EAAgBC,EAAaC,GACjD,IAAIC,EAAOH,EAAeI,GAAGP,QAAQI,EAAa,IAClDE,EAAOR,EAAiBQ,GACxB,IAAIE,EAAOL,EAAeK,KACtBH,KAC2B,IAAvBG,EAAKC,QAAQ,KACbD,GAAQ,YAERA,GAAQ,aAKhB,MAAME,OAAyC,IAAnBvG,OAAOwG,QAA0BxG,OAAOwG,QAAUxG,OAAOyG,WACjFC,OAAwC,IAAnB1G,OAAO2G,QAA0B3G,OAAO2G,QAAU3G,OAAO4G,UAC9EC,OAA6C,IAAtB7G,OAAO8G,WAA6B9G,OAAO8G,WAAa3G,SAAS4D,KAAKgD,YAC7FC,OAA+C,IAAvBhH,OAAOiH,YAA8BjH,OAAOiH,YAAc9G,SAAS4D,KAAKmD,aAGhGC,EAAeT,EAAcU,KAAKC,OAAOL,EAD1B,KAC2D,GAC1EM,EAAgBf,EAAea,KAAKC,OAAOR,EAH7B,KAG4D,GAW9E,OATY7G,OAAOqF,KAAKgB,EAAMF,EAC1B,4BAEUgB,EACV,SAAWG,EACX,iCAGAC,SACG,EAGX,SAASC,EAA6BxB,GAClC,OAAOD,EAAeC,EAAgB,YAAY,GActD,SAASyB,EAAuBzB,GAC5B,OAAOD,EAAeC,EAAgB,yBAAyB,GAGnE,SAAS0B,EAAyB1B,GAC9B,MAAM2B,EAAQjC,EAAEM,GACV4B,EAAWD,EAAMjJ,QAAQ,2BAA2BmJ,KAAK,mDAC/D,IAAKD,EAASnF,OACV,OAEJ,MAAMgB,EAAQkE,EAAMG,MAChBrE,EACAmE,EAASG,MAAK,WACV,MAAMC,EAAMtC,EAAEnI,MACdyK,EAAIC,KAAK,OAAQD,EAAIC,KAAK,sBAAsBpC,QAAQ,SAAUpC,OAGtEmE,EAASM,WAAW,QAI5B,SAASC,EAA6BC,EAAKC,EAAOC,GAC9C,MAAMnC,EAAOL,EAAiBsC,EAAIjC,MAC5B/G,EAAOe,SAASoF,eAAeY,GACrC,GAAI/G,EAAM,CACN,MAAMmJ,EAAWnJ,EAAKoJ,SAASC,cACd,WAAbF,EACAnJ,EAAK9B,QAAQ8B,EAAK9B,QAAQmF,QAAU,IAAIiG,OAAOJ,EAASD,GAAO,GAAM,GACjD,UAAbE,KACuD,IAA1DnJ,EAAKuJ,UAAUrC,QAAQ,+BAAwClH,EAAKqE,MACpErE,EAAKqE,OAAS,IAAM4E,EAEpBjJ,EAAKqE,MAAQ4E,GAIrB3C,EAAEtG,GAAMwJ,QAAQ,UAEpBR,EAAIS,QA2BR7I,OAAO2F,iBAAmBA,EAC1B3F,OAAO8F,iBAAmBA,EAE1B9F,OAAOwH,6BAA+BA,EACtCxH,OAAO8I,0BAhFP,SAAmCV,EAAKW,GACpC,MAAM5C,EAAOL,EAAiBsC,EAAIjC,MAC5B/G,EAAOe,SAASoF,eAAeY,IACyB,IAA1D/G,EAAKuJ,UAAUrC,QAAQ,+BAAwClH,EAAKqE,MACpErE,EAAKqE,OAAS,IAAMsF,EAEpB5I,SAASoF,eAAeY,GAAM1C,MAAQsF,EAE1CX,EAAIS,SAyER7I,OAAOyH,uBAAyBA,EAChCzH,OAAO0H,yBAA2BA,EAClC1H,OAAOmI,6BAA+BA,EACtCnI,OAAOgJ,gCAhCP,SAAyCZ,EAAKa,EAAOX,EAASD,GAC1D,MAAMjC,EAAKN,EAAiBsC,EAAIjC,MAAMN,QAAQ,SAAU,IACzCH,EAAE,IAAMU,GAChByB,KAAK,UAAUE,MAAK,WACnBxK,KAAKkG,QAAUwF,IACf1L,KAAK2L,YAAcZ,EACnB/K,KAAKkG,MAAQ4E,MAGrBD,EAAIS,SAwBR7I,OAAOmJ,gCArBP,SAAyCf,EAAKa,GAC1C,MAAM7C,EAAKN,EAAiBsC,EAAIjC,MAAMN,QAAQ,WAAY,IAC3CH,EAAE,IAAMU,GAChByB,KAAK,UAAUE,MAAK,WACnBxK,KAAKkG,QAAUwF,GACfvD,EAAEnI,MAAMoF,YAEbiG,QAAQ,UACXR,EAAIS,SAgBR7I,OAAOoJ,oBAAsB3B,EAC7BzH,OAAOqJ,uBAAyBlB,EAEhCzC,EAAEvF,UAAUmJ,OAAM,WACd5D,EAAE,wBAAwBhB,GAAG,SAAS,SAASnG,GAC3CA,EAAMO,iBACNyK,OAAOT,0BAA0B9I,OAAQ0F,EAAEnI,MAAMiM,KAAK,oBAE1D9D,EAAE,QAAQhB,GAAG,QAAS,gCAAgC,SAAS+E,GAE3D,GADAA,EAAE3K,iBACEvB,KAAK8I,KAAM,CACX,MAAM9H,EAAQmH,EAAEgE,MAAM,sBAAuB,CAACrD,KAAM9I,KAAK8I,OACzDX,EAAEnI,MAAMqL,QAAQrK,GACXA,EAAMoL,sBACPlC,EAAuBlK,UAGhCmH,GAAG,SAAU,kCAAkC,WAC9C,MAAMnG,EAAQmH,EAAEgE,MAAM,yBACtBhE,EAAEnI,MAAMqL,QAAQrK,GACXA,EAAMoL,sBACPjC,EAAyBnK,SAE9BmH,GAAG,SAAU,iCAAiC,WACzCnH,KAAKqM,SACLlC,EAAyBnK,SAE9BmH,GAAG,QAAS,mBAAmB,SAAS+E,GACvCA,EAAE3K,iBACF,MAAMP,EAAQmH,EAAEgE,MAAM,yBACtBhE,EAAEnI,MAAMqL,QAAQrK,GACXA,EAAMoL,sBACPnC,EAA6BjK,SAIrCmI,EAAE,kCAAkCkD,QAAQ,UAC5ClD,EAAE,yCAAyCkD,QAAQ,aAtL3D,CAyLGiB,K,iDCtLY,SAASrE,EAAWF,GAC/B,IAAIwE,GAAS,EACTC,GAAiB,EAErBzE,EAAKpH,iBAAiB,UAAU,WAC5B4L,GAAS,KAGb,MAAME,EAAUC,QAAQ,4BAYxB,SAASC,IACL/J,SAASgK,oBAAoB,UAAWD,GACxC/J,SAASgK,oBAAoB,YAAaD,GAC1C5E,EAAKpH,iBAAiB,UAAU,SAASkM,EAAc7L,GACnD+G,EAAK6E,oBAAoB,SAAUC,GAEnC,MACMzF,EADSpG,EAAMC,OACCE,QAAQ,gBAC1BiG,GAAUW,EAAK3G,SAASgG,KACxBoF,GAAiB,MApB7B/J,OAAO9B,iBAAiB,gBAAgB,SAASmM,GAC7C,IAAKP,GAAUC,EAEX,OADAM,EAAIC,YAAcN,EACXA,KAMf7J,SAASjC,iBAAiB,UAAWgM,GACrC/J,SAASjC,iBAAiB,YAAagM,GAzB3C,mC,iBCAA/J,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MACMgM,EADShM,EAAMC,OACEE,QAAQ,qBAC/B,GAAI6L,EAAS,CACT,MAAMC,EAAQD,EAAQ7L,QAAQ,gBACxB8E,EAAQgH,GAASA,EAAMnI,cAAc,SAC3C,GAAImB,EAAO,CACP,MAAMiH,EAAU,CAAC,OAAQ,YACnBC,GAASD,EAAQnE,QAAQ9C,EAAMmH,MAAQ,GAAK,EAClDnH,EAAMmH,KAAOF,EAAQC,S,iCCTjC,8BAcA,SAASE,EAAehH,GACpBrG,KAAKqG,QAAUA,EA4BnB,SAASiH,EAAQxN,EAAMC,GAenB,GAdAC,KAAKC,KAAOC,OAAOC,OAAO,CACtBoN,OAAQ,OACRC,kBAAmB,WACnBC,qBAAsB,cACtBC,aAAc,iBACdC,cAAe,aACfC,QAAS,KACTC,SAAU,MACX9N,GAEHC,KAAKF,KAAOA,EACZE,KAAK8N,KAAO,IAAIT,EAAevN,GAE/BE,KAAK+N,UAAY/N,KAAKF,KAAKgF,cAAc9E,KAAKC,KAAKuN,oBAC9CxN,KAAK+N,UACN,MAAM,IAAIC,MAAM,uBAEpBhO,KAAK+N,UAAUE,OAASjO,KAAK8N,KAAKI,cAAgBlO,KAAK8N,KAAKK,WAC5DnO,KAAK+N,UAAUjJ,cAAc,aAAanE,iBAAiB,QAAS,SAASK,GACzEA,EAAMO,iBACNvB,KAAKoO,UACPvN,KAAKb,OAEP,MAAMqO,EAAOrO,KACbA,KAAKF,KAAKa,iBAAiB,SAAS,SAASK,GACzC,MAAMC,EAASD,EAAMC,OAErB,GADeA,EAAOE,QAAQkN,EAAKpO,KAAKwN,sBAC5B,CACRzM,EAAMO,iBACN,MAAM+M,EAAMrN,EAAOE,QAAQ,IAAMkN,EAAKpO,KAAKyN,cAC3CW,EAAKE,UAAUD,OAoG3B,SAASE,EAAgBF,EAAKf,EAAQJ,GAClC,MAAMsB,EAAQ,IAAIC,OAAO,IAAMnB,EAAS,uBAClCoB,EAAcpB,EAAS,KAAOJ,EAAQ,GAC5CmB,EAAIrJ,iBAAiB,KAAKE,SAAQ,SAASkB,GACnCA,EAAQuI,UACRvI,EAAQuI,QAAUvI,EAAQuI,QAAQtG,QAAQmG,EAAOE,IAEjDtI,EAAQwC,KACRxC,EAAQwC,GAAKxC,EAAQwC,GAAGP,QAAQmG,EAAOE,IAEvCtI,EAAQuC,OACRvC,EAAQuC,KAAOvC,EAAQuC,KAAKN,QAAQmG,EAAOE,OAGnDL,EAAIO,aAAa,KAAMtB,EAAS,KAAOJ,EAAQ,IASnD,SAAS2B,EAAkBR,EAAKnB,GAC5B,MAAM4B,EAAQT,EAAIxJ,cAAc,iBAC5BiK,IACAA,EAAMC,UAAYD,EAAMC,UAAU1G,QAAQ,UAAW,IAAM6E,IAtLnEE,EAAetM,UAAUkO,WAAa,SAASC,GAC3C,OAAO,SAAShJ,GACZ,MAAMD,EAAQjG,KAAKqG,QAAQvB,cAAcoK,GACzC,QAAqB,IAAVhJ,EACP,OAAOjD,SAASgD,EAAMC,MAAMiJ,YAE5BjJ,EAAQjD,SAASiD,GACZkJ,MAAMlJ,KACPD,EAAMC,MAAQA,KAM9BmH,EAAetM,UAAUmN,WAAab,EAAetM,UAAUkO,WAAW,+BAC1E5B,EAAetM,UAAUoN,SAAWd,EAAetM,UAAUkO,WAAW,iCAmDxE3B,EAAQvM,UAAUsO,QAAU,WACxB,OAAOrP,KAAKF,KAAKmF,iBAAiB,IAAMjF,KAAKC,KAAKyN,eAQtDJ,EAAQvM,UAAUqN,OAAS,WACvB,IAAIF,EAAalO,KAAK8N,KAAKI,aAC3B,MAAMC,EAAWnO,KAAK8N,KAAKK,WAC3B,GAAID,GAAcC,EACd,OAAO,KAGX,MAAMmB,EAAkBtP,KAAKF,KAAKgF,cAAc,IAAM9E,KAAKC,KAAK0N,eAChE,IAAK2B,EACD,MAAM,IAAItB,MAAM,2BAGpB,MAAMM,EAAMgB,EAAgBC,WAAU,GACtCjB,EAAIjN,UAAU+D,OAAOpF,KAAKC,KAAK0N,eAC/B2B,EAAgBE,WAAWC,aAAanB,EAAKgB,GAE7CtP,KAAK8N,KAAKI,aAAaA,GAGvBlO,KAAK+N,UAAUE,OAASC,GAAcC,EAGtC,MAAMuB,EAAepB,EAAIxJ,cAAc9E,KAAKC,KAAKwN,sBAejD,OAdIiC,IACAA,EAAazB,QAAS,GAItBjO,KAAKC,KAAK2N,SACV5N,KAAKC,KAAK2N,QAAQhJ,KAAK5E,KAAMsO,EAAKtO,KAAKC,KAAKsN,OAAQW,GAExDjH,IAASC,IAAImE,QAAQ,SAAU,CAACiD,IAChCrH,IAAS0I,QAAQtE,QAAQ,QAAS,CAACiD,EAAKtO,KAAKC,KAAKsN,SAGlDpF,EAAEvF,UAAUyI,QAAQ,gBAAiB,CAAClD,EAAEmG,GAAMtO,KAAKC,KAAKsN,SAEjDe,GAQXhB,EAAQvM,UAAUwN,UAAY,SAASD,GACnC,IAAIJ,EAAalO,KAAK8N,KAAKI,aAE3B,MAAM0B,EAAOC,MAAMC,KAAK9P,KAAKqP,WACvBU,EAAYH,EAAK7G,QAAQuF,GAC/B,GAAItO,KAAKC,KAAK4N,SACV,IAAK,IAAImC,EAAED,EAAU,EAAGC,EAAEJ,EAAK1K,OAAQ8K,IACnChQ,KAAKC,KAAK4N,SAASjJ,KAAK5E,KAAM4P,EAAKI,GAAIhQ,KAAKC,KAAKsN,OAAQyC,GAKjE/I,IAASC,IAAImE,QAAQ,UAAW,CAACiD,IACjCrH,IAAS0I,QAAQtE,QAAQ,SAAU,CAACiD,EAAKtO,KAAKC,KAAKsN,SAEnDe,EAAIkB,WAAWS,YAAY3B,GAG3BrH,IAAS0I,QAAQtE,QAAQ,UAAW,CAACiD,EAAKtO,KAAKC,KAAKsN,SAGpDpF,EAAEvF,UAAUyI,QAAQ,kBAAmB,CAAClD,EAAEmG,GAAMtO,KAAKC,KAAKsN,SAE1DvN,KAAK8N,KAAKI,aAAaA,GAGvBlO,KAAK+N,UAAUE,OAASC,GAAclO,KAAK8N,KAAKK,YAyEpD1I,aAhCA,SAA0B3F,EAAO8C,SAAS4D,MACtC1G,EAAKmF,iBAAiB,iBAAiBE,SAAQ,SAASO,GACpD,OAAOA,EAAYC,QAAQC,YACvB,IAAK,UACD,IAAI0H,EAAQ5H,EAAa,CACrB6H,OAAQ7H,EAAYC,QAAQuK,aAC5BtC,QAAS,SAASU,EAAKf,EAAQJ,GAC3BqB,EAAgBF,EAAKf,EAAQJ,GAC7B2B,EAAkBR,EAAKnB,IAE3BU,SAAU,SAASS,EAAKf,EAAQJ,GAC5BqB,EAAgBF,EAAKf,EAAQJ,GAC7B2B,EAAkBR,EAAKnB,MAG/B,MACJ,IAAK,UACD,IAAIG,EAAQ5H,EAAa,CACrB6H,OAAQ7H,EAAYC,QAAQuK,aAC5BtC,QAAS,SAASU,EAAKf,EAAQJ,GAC3BqB,EAAgBF,EAAKf,EAAQJ,IAEjCU,SAAU,SAASS,EAAKf,EAAQJ,GAC5BqB,EAAgBF,EAAKf,EAAQJ,e,kDCpOrD,+CAKA,SAASgD,EAAarQ,EAAO8C,SAAS4D,MAElC1G,EAAKgC,QADU,uBACWsO,IAAStQ,GACnCsQ,IAAStQ,EAAKmF,iBAFC,uBAMnBQ,aAAa,WACT0K,IAGAhI,EAAEvF,UAAUuE,GAAG,gBAAgB,SAASnG,GACpC,MAAMqP,EAAerP,EAAMC,OAAOqP,aAAa,QACzCC,EAAWF,GAAgBzN,SAASkC,cAAcuL,GACpDE,GACAH,IAASI,OAAOD,EAAStL,iBAAiB,6BAKtDgC,IAASC,IAAIC,GAAG,SAAUgJ,GAG1B1N,OAAOgO,WAAahO,OAAOgO,YAAc,GACzCvQ,OAAOC,OAAOsC,OAAOgO,WAAY,CAC7BL,iB,kDC9BJ,+BAOA3K,aAAa,WACT,MAAMiL,EAAkB9N,SAASqC,iBAAiB,mDAC5C0L,EAAsBd,MAAMC,KAAKY,GAAiBpG,MAAK,SAASsG,GAClE,MAAoC,KAA7BA,EAAe5B,aAG1B,GAAI2B,EAAqB,CAErB,MACME,EADYF,EAAoBpO,wBACXQ,IACR8N,EAbE,IAamCA,EAAWjO,SAASC,gBAAgB8G,aAbvE,IAejBmH,YAAW,WACPC,IAAUtM,GAAGhC,OAAQ,GAAK,CACtBuO,SAAU,CACNtM,EAAGmM,EAAWhH,KAAKoH,MAAMrO,SAASC,gBAAgB8G,aAAe,GACjEuH,SAAU,aAKvB,CACH,MAAMC,EAAOC,SAASD,KAAKE,OAAO,GAAG/I,QAAQ,WAAY,QACnDgJ,EAAcH,GAAQvO,SAASkC,kBAAkBqM,KACnDG,GACAnJ,EAAEmJ,GAAaC,IAAI,YAM/BpJ,EAAEvF,UAAUuE,GAAG,gBAAgB,SAASnG,GACpC,MAAMwQ,EAAWxQ,EAAMC,OAAOqP,aAAa,iBAC3C,GAAIkB,EAAU,CACVC,QAAQC,aAAa,KAAM,OAAQF,KAEnC,MAAMzJ,EAAOnF,SAASoF,eAAe,cACrC,GAAID,EAAM,CACN,MAAM4J,EAAS,IAAIC,IAAI7J,EAAK4J,QAC5BA,EAAOR,KAAOK,EACdzJ,EAAK4J,OAASA,EAAOxC,kB,kDC/CjC,gDASA,SAAS/I,EAAWrG,EAASsG,GACpBA,EAAQlF,QAAQ,gBACjBgH,EAAE9B,GAASwL,QAAQ9R,GAS3B,SAASwG,EAAYzG,EAAO8C,SAAS4D,MACjC,IACIzG,EAAU,CACV+R,KAAM,CACF7F,KAAM,SAAS8F,GACX,MAAO,CACHC,KAAMD,EAAOC,KACbC,KAAMF,EAAOE,SAK7BnS,EAAKgC,QAXU,wBAWWsE,EAAWrG,EAASD,GAC9CA,EAAKmF,iBAZU,uBAYiBE,QAAQiB,EAAWvF,KAAK,KAAMd,IAIlE0F,YAAac,GACbU,IAASC,IAAIC,GAAG,SAAUZ,K,uDCnC1B3D,SAASjC,iBAAiB,UAAU,SAASK,GACzC,MAAMC,EAASD,EAAMC,OACrB,GAAwB,UAAnBA,EAAOiR,SAAwBjR,EAAOE,QAAQ,wBAAyB,CACxE,IAAIgR,EAAWlR,EAAOiF,MAAMkM,MAAM,MAAMC,MACpCC,EAAarR,EAAOc,mBAAmB+C,cAAc,QACrDwN,IAEIA,EAAW3G,YADXwG,GAGyBG,EAAW3M,QAAQ4M,iBAS5D3P,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MAAMC,EAASD,EAAMC,OACG,UAAnBA,EAAOiR,SAAwBjR,EAAOE,QAAQ,yBAC/CF,EAAOI,UAAU2D,IAAI,cAI7BpC,SAASjC,iBAAiB,QAAQ,SAASK,GACvC,MAAMC,EAASD,EAAMC,OACG,UAAnBA,EAAOiR,SAAwBjR,EAAOE,QAAQ,yBAC/CF,EAAOI,UAAU+D,OAAO,e,sCC/BhCxC,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MACMiF,EADSjF,EAAMC,OACAE,QAAQ,gBACvBiG,EAASnB,GAASA,EAAM9E,QAAQ,gBAChCqR,EAAWpL,GAAUA,EAAOtC,cAAc,qBAChD,GAAI0N,EAAU,CACEvM,EAAMC,MAAMuM,OAEpBD,EAAS1J,KAAO,UAAY7C,EAAMC,MAElCsM,EAASE,gBAAgB,a,iCCVrC,0CAQA,SAAStM,EAAWC,GACXA,EAAQlF,QAAQ,gBACjBgH,EAAE9B,GAASsM,cASnB,SAASpM,EAAYzG,EAAO8C,SAAS4D,MAEjC1G,EAAKgC,QADU,kBACWsE,EAAWtG,GACrCA,EAAKmF,iBAFU,iBAEiBE,QAAQiB,GAI5CX,YAAac,GACbU,IAASC,IAAIC,GAAG,SAAUZ,K,uDC3B1B3D,SAASjC,iBAAiB,SAAS,SAASK,GACxC,MACMiF,EADSjF,EAAMC,OACAE,QAAQ,cACvBiG,EAASnB,GAASA,EAAM9E,QAAQ,gBAChCqR,EAAWpL,GAAUA,EAAOtC,cAAc,qBAChD,GAAI0N,EAAU,CACV,IAAII,EAAO3M,EAAMC,MAAMuM,OACnBG,EACAJ,EAAS1J,KAAO8J,EAEhBJ,EAASE,gBAAgB","file":"changeform.chunk.min.js","sourcesContent":["/**\n * Сортировка DOM-элементов с помощью кнопок.\n * @module SortButtons\n */\n\n/**\n * @typedef {Object} module:SortButtons.SortButtonsOptions\n * @property {Number}    speed\n * @property {String}    [items]\n * @property {String}    [moveUpBtn]\n * @property {String}    [moveDownBtn]\n * @property {String}    [disabledClass]\n * @property {?String}   [ignore]\n * @property {?Function} [onChange]\n */\n\nimport {TimelineLite} from \"gsap\";\n\n/**\n * Конструктор объектов SortButtons.\n * @param {Element} root\n * @param {module:SortButtons.SortButtonsOptions} [options]\n * @constructor\n */\nfunction SortButtons(root, options) {\n    /** @type module:SortButtons.SortButtonsOptions */\n    this.opts = Object.assign({\n        speed: 1,\n        items: '.item',\n        moveUpBtn: '.move-up',\n        moveDownBtn: '.move-down',\n        disabledClass: 'disabled',\n        ignore: null,\n        onChange: null\n    }, options);\n\n    /** @type {Element} */\n    this.root = root;\n\n    root.addEventListener('click', this._onClick.bind(this));\n    root.addEventListener('update:sortbuttons', this.updateBounds.bind(this));\n    this.updateBounds();\n}\n\n/**\n * Обработчик события клика в пределах корневого элемента.\n * @param {MouseEvent} event\n * @private\n */\nSortButtons.prototype._onClick = function(event) {\n    const target = event.target;\n\n    const moveUpButton = target.closest(this.opts.moveUpBtn);\n    if (moveUpButton && this.root.contains(moveUpButton)) {\n        if (moveUpButton.classList.contains(this.opts.disabledClass)) {\n            return\n        }\n\n        const item = moveUpButton.closest(this.opts.items);\n        if (item) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.moveUp(item);\n        }\n        return\n    }\n\n    const moveDownButton = target.closest(this.opts.moveDownBtn);\n    if (moveDownButton && this.root.contains(moveDownButton)) {\n        if (moveDownButton.classList.contains(this.opts.disabledClass)) {\n            return\n        }\n\n        const item = moveDownButton.closest(this.opts.items);\n        if (item) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.moveDown(item);\n        }\n    }\n};\n\n/**\n * Поиск ближайшего элемента, начиная с elem и ниже.\n * @param {Element} elem\n * @returns {Element}\n * @private\n */\nSortButtons.prototype._findNextSince = function(elem) {\n    while (elem && (!elem.matches(this.opts.items) || (this.opts.ignore && elem.matches(this.opts.ignore)))) {\n        elem = elem.nextElementSibling;\n    }\n    return elem;\n};\n\n/**\n * Перемещение элемента вниз.\n * @param {Element} item\n */\nSortButtons.prototype.moveDown = function(item) {\n    const next = this._findNextSince(item.nextElementSibling);\n    if (next) {\n        this._swap(item, next);\n    }\n};\n\n/**\n * Поиск ближайшего элемента, начиная с elem и выше.\n * @param {Element} elem\n * @returns {Element}\n * @private\n */\nSortButtons.prototype._findPreviousSince = function(elem) {\n    while (elem && (!elem.matches(this.opts.items) || (this.opts.ignore && elem.matches(this.opts.ignore)))) {\n        elem = elem.previousElementSibling;\n    }\n    return elem;\n};\n\n/**\n * Перемещение элемента наверх.\n * @param {Element} item\n */\nSortButtons.prototype.moveUp = function(item) {\n    const prev = this._findPreviousSince(item.previousElementSibling);\n    if (prev) {\n        this._swap(prev, item, true);\n    }\n};\n\n/**\n * Получение размера и положения элемента относительно ближайшего\n * элемента, чей position не равен static.\n * @param elem\n * @returns {{top: Number, left: Number, width: Number, height: Number}}\n * @private\n */\nSortButtons.prototype._getPosition = function(elem) {\n    const elemRect = elem.getBoundingClientRect();\n    const elemStyles = window.getComputedStyle(elem);\n\n    let offsetParent = elem.offsetParent || document.documentElement;\n    const parentStyles = window.getComputedStyle(offsetParent);\n\n    return {\n        top: elem.offsetTop - parseInt(parentStyles.borderTopWidth) - parseInt(elemStyles.marginTop),\n        left: elem.offsetLeft - parseInt(parentStyles.borderLeftWidth) - parseInt(elemStyles.marginLeft),\n        width: elemRect.width,\n        height: elemRect.height,\n    }\n};\n\n/**\n * Меняет местами два соседних элемента elem1 и elem2 с анимацией.\n * @param {Element} elem1\n * @param {Element} elem2\n * @param {boolean} highlightSecond\n * @private\n */\nSortButtons.prototype._swap = function(elem1, elem2, highlightSecond=false) {\n    //   Initial state:\n    //\n    //  |-------------|\n    //  |    elem1    |\n    //  |             |\n    //  |-------------|\n    //\n    //  |-------------|\n    //  |    elem2    |\n    //  |-------------|\n    //\n\n    const rect1 = this._getPosition(elem1);\n    const rect2 = this._getPosition(elem2);\n    const initialCSSText1 = elem1.style.cssText;\n    const initialCSSText2 = elem2.style.cssText;\n\n    this.disableItemButtons(elem1);\n    this.disableItemButtons(elem2);\n    elem2.after(elem1);\n\n    // имитация начального расположения\n    const spaceY = rect2.top - rect1.top - rect1.height;\n    elem1.style.transform = `translate3d(0, ${-rect2.height - spaceY}px, ${highlightSecond ? 0 : 1}px)`;\n    elem2.style.transform = `translate3d(0, ${rect2.top - rect1.top}px, ${highlightSecond ? 1 : 0}px)`;\n\n    new TimelineLite({\n        onComplete: function() {\n            elem1.style.cssText = initialCSSText1;\n            elem2.style.cssText = initialCSSText2;\n            this.updateBounds();\n        }.bind(this)\n    })\n    .to(elem1, this.opts.speed, {y: 0, clearProps: 'all'})\n    .to(elem2, this.opts.speed, {y: 0, clearProps: 'all'}, 0);\n\n    // callback\n    if (typeof this.opts.onChange === 'function') {\n        this.opts.onChange.call(this, elem1, elem2);\n    }\n};\n\n/**\n * Отключение кнопок сортировки.\n * @param {Element} item\n */\nSortButtons.prototype.disableItemButtons = function(item) {\n    const upBtn = item.querySelector(this.opts.moveUpBtn);\n    const downBtn = item.querySelector(this.opts.moveDownBtn);\n    upBtn.classList.add(this.opts.disabledClass);\n    downBtn.classList.add(this.opts.disabledClass);\n};\n\n/**\n * Отключение у граничных элементов кнопок, которые не имеют смысла.\n */\nSortButtons.prototype.updateBounds = function() {\n    const items = this.root.querySelectorAll(this.opts.items);\n    if (!items.length) {\n        return\n    }\n\n    items.forEach(function(item) {\n        const upBtn = item.querySelector(this.opts.moveUpBtn);\n        const downBtn = item.querySelector(this.opts.moveDownBtn);\n        upBtn.classList.remove(this.opts.disabledClass);\n        downBtn.classList.remove(this.opts.disabledClass);\n    }.bind(this));\n\n    const firstItem = this._findNextSince(items[0]);\n    if (firstItem) {\n        const firstItemBtn = firstItem.querySelector(this.opts.moveUpBtn);\n        if (firstItemBtn) {\n            firstItemBtn.classList.add(this.opts.disabledClass);\n        }\n    }\n\n    const lastItem = this._findPreviousSince(items[items.length - 1]);\n    if (lastItem) {\n        const lastItemBtn = lastItem.querySelector(this.opts.moveDownBtn);\n        if (lastItemBtn) {\n            lastItemBtn.classList.add(this.opts.disabledClass);\n        }\n    }\n};\n\n\nexport default SortButtons;\n","import whenDomReady from \"when-dom-ready\";\nimport formUtils from \"../form_utils\";\nimport SortButtons from \"./SortButtons\";\n\n\nwhenDomReady(function() {\n    const inlineGroups = document.querySelectorAll('.sortable-inline-group');\n    inlineGroups.forEach(function(inlineGroup) {\n        new SortButtons(inlineGroup, {\n            speed: inlineGroup.dataset.inlineType === 'tabular' ? 0.25 : 0.5,\n            items: '.sortable-item',\n            moveUpBtn: '.sortable-move-up',\n            moveDownBtn: '.sortable-move-down',\n            ignore: '.empty-form'\n        });\n    });\n});\n\n\n/**\n * Установка значения сортировки инлайн-формам.\n * @param {Element} inlineGroup\n */\nfunction fillInlineOrder(inlineGroup) {\n    let currentOrder = 0;\n    const inlineForms = inlineGroup.querySelectorAll('.sortable-item:not(.empty-form)');\n    inlineForms.forEach(function(inlineForm) {\n        if (inlineForm.classList.contains('has_original')\n            || formUtils.containsChangedField(inlineForm)) {\n            const input = inlineForm.querySelector('.sortable-input');\n            if (input) {\n                input.value = currentOrder++;\n            }\n        }\n    });\n}\n\n\ndocument.addEventListener('submit', function(event) {\n    const form = event.target;\n    const inlineGroups = form.querySelectorAll('.sortable-inline-group');\n    inlineGroups.forEach(function(inlineGroup) {\n        fillInlineOrder(inlineGroup);\n    });\n});\n","import flatpickr from \"flatpickr\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"../../css/widgets/datetime.scss\";\n\n\nfunction initWidget(options, element) {\n    if (!element.closest('.empty-form')) {\n        flatpickr(element, options);\n    }\n}\n\n\n/**\n * Инициализация DateTime виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let date_selector = '.vDatePicker';\n    let date_options = {\n        altInput: true,\n        altFormat: \"F j, Y\",\n        dateFormat: \"Y-m-d\"\n    };\n    root.matches(date_selector) && initWidget(date_options, root);\n    root.querySelectorAll(date_selector).forEach(initWidget.bind(null, date_options));\n\n    let time_selector = '.vTimePicker';\n    let time_options = {\n        enableTime: true,\n        noCalendar: true,\n        dateFormat: \"H:i\",\n        time_24hr: true\n    };\n    root.matches(time_selector) && initWidget(time_options, root);\n    root.querySelectorAll(time_selector).forEach(initWidget.bind(null, time_options));\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n\n\n/**\n * Симуляция нажатия стрелок при прокрутке колеса мыши на полях выбора времени.\n */\ndocument.addEventListener('wheel', function(event) {\n    const target = event.target;\n    const widget = target.closest('.numInputWrapper');\n    const input = widget && widget.querySelector('input');\n    if (input) {\n        event.preventDefault();\n        const fake_event = new KeyboardEvent('keydown', {\n            bubbles: true,\n            cancelable: true,\n            keyCode: event.deltaY > 0 ? 40 : 38\n        });\n        input.dispatchEvent(fake_event);\n    }\n});\n\n\n/**\n * Клик на иконку календаря\n */\ndocument.addEventListener('click', function(event) {\n    const target = event.target;\n    const button = target.closest('.vDateFieldTrigger');\n    const widget = button && button.closest('.input-group');\n    const input = widget && widget.querySelector('.vDateInput');\n    if (input && input._flatpickr) {\n        event.preventDefault();\n        input._flatpickr.open();\n    }\n});\n","/* global gettext */\n\nimport whenDomReady from \"when-dom-ready\";\nimport hookUnload from \"./components/hook_unload\";\nimport \"./components/inlines/inlines\";\nimport \"./components/inlines/sortable\";\nimport \"./components/RelatedObjectLookups\";\nimport \"./components/autosize\";\nimport \"./components/tabs\";\nimport \"./widgets/autocomplete\";\nimport \"./widgets/clearable_file\";\nimport \"./widgets/datetime\";\nimport \"./widgets/email\";\nimport \"./widgets/multiselect\";\nimport \"./widgets/password\";\nimport \"./widgets/url\";\n\n\nwhenDomReady(function() {\n    // предупреждение при закрытии формы\n    const form = document.getElementById('changeform');\n    if (form) {\n        hookUnload(form);\n    }\n\n    // динамическая подгрузка скрипта для prepopulate_fields\n    if (window.django_prepopulated_fields && window.django_prepopulated_fields.length) {\n        import(/* webpackChunkName: \"prepopulate\" */ './components/prepopulate/prepopulate');\n    }\n});\n","// Handles related-objects functionality: lookup link for raw_id_fields\n// and Add Another links.\n\n(function($) {\n    'use strict';\n\n    // IE doesn't accept periods or dashes in the window name, but the element IDs\n    // we use to generate popup window names may contain them, therefore we map them\n    // to allowed characters in a reversible way so that we can locate the correct\n    // element when the popup window is dismissed.\n    function id_to_windowname(text) {\n        text = text.replace(/\\./g, '__dot__');\n        text = text.replace(/-/g, '__dash__');\n        return text;\n    }\n\n    function windowname_to_id(text) {\n        text = text.replace(/__dot__/g, '.');\n        text = text.replace(/__dash__/g, '-');\n        return text;\n    }\n\n    function showAdminPopup(triggeringLink, name_regexp, add_popup) {\n        let name = triggeringLink.id.replace(name_regexp, '');\n        name = id_to_windowname(name);\n        let href = triggeringLink.href;\n        if (add_popup) {\n            if (href.indexOf('?') === -1) {\n                href += '?_popup=1';\n            } else {\n                href += '&_popup=1';\n            }\n        }\n\n        // Центрирование popup\n        const browser_left = typeof window.screenX !== 'undefined' ? window.screenX : window.screenLeft,\n            browser_top = typeof window.screenY !== 'undefined' ? window.screenY : window.screenTop,\n            browser_width = typeof window.outerWidth !== 'undefined' ? window.outerWidth : document.body.clientWidth,\n            browser_height = typeof window.outerHeight !== 'undefined' ? window.outerHeight : document.body.clientHeight,\n            popup_width = 940,\n            popup_height = 600,\n            top_position = browser_top + Math.round((browser_height - popup_height) / 2),\n            left_position = browser_left + Math.round((browser_width - popup_width) / 2);\n\n        const win = window.open(href, name,\n            'width=' + popup_width +\n            ',height=' + popup_height +\n            ',top=' + top_position +\n            ',left=' + left_position +\n            ',resizable=yes,scrollbars=yes'\n        );\n\n        win.focus();\n        return false;\n    }\n\n    function showRelatedObjectLookupPopup(triggeringLink) {\n        return showAdminPopup(triggeringLink, /^lookup_/, true);\n    }\n\n    function dismissRelatedLookupPopup(win, chosenId) {\n        const name = windowname_to_id(win.name);\n        const elem = document.getElementById(name);\n        if (elem.className.indexOf('vManyToManyRawIdAdminField') !== -1 && elem.value) {\n            elem.value += ',' + chosenId;\n        } else {\n            document.getElementById(name).value = chosenId;\n        }\n        win.close();\n    }\n\n    function showRelatedObjectPopup(triggeringLink) {\n        return showAdminPopup(triggeringLink, /^(change|add|delete)_/, false);\n    }\n\n    function updateRelatedObjectLinks(triggeringLink) {\n        const $this = $(triggeringLink);\n        const siblings = $this.closest('.related-widget-wrapper').find('.view-related, .change-related, .delete-related');\n        if (!siblings.length) {\n            return;\n        }\n        const value = $this.val();\n        if (value) {\n            siblings.each(function() {\n                const elm = $(this);\n                elm.attr('href', elm.attr('data-href-template').replace('__fk__', value));\n            });\n        } else {\n            siblings.removeAttr('href');\n        }\n    }\n\n    function dismissAddRelatedObjectPopup(win, newId, newRepr) {\n        const name = windowname_to_id(win.name);\n        const elem = document.getElementById(name);\n        if (elem) {\n            const elemName = elem.nodeName.toUpperCase();\n            if (elemName === 'SELECT') {\n                elem.options[elem.options.length] = new Option(newRepr, newId, true, true);\n            } else if (elemName === 'INPUT') {\n                if (elem.className.indexOf('vManyToManyRawIdAdminField') !== -1 && elem.value) {\n                    elem.value += ',' + newId;\n                } else {\n                    elem.value = newId;\n                }\n            }\n            // Trigger a change event to update related links if required.\n            $(elem).trigger('change');\n        }\n        win.close();\n    }\n\n    function dismissChangeRelatedObjectPopup(win, objId, newRepr, newId) {\n        const id = windowname_to_id(win.name).replace(/^edit_/, '');\n        const select = $('#' + id);\n        select.find('option').each(function() {\n            if (this.value === objId) {\n                this.textContent = newRepr;\n                this.value = newId;\n            }\n        });\n        win.close();\n    }\n\n    function dismissDeleteRelatedObjectPopup(win, objId) {\n        const id = windowname_to_id(win.name).replace(/^delete_/, '');\n        const select = $('#' + id);\n        select.find('option').each(function() {\n            if (this.value === objId) {\n                $(this).remove();\n            }\n        }).trigger('change');\n        win.close();\n    }\n\n    // Global for testing purposes\n    window.id_to_windowname = id_to_windowname;\n    window.windowname_to_id = windowname_to_id;\n\n    window.showRelatedObjectLookupPopup = showRelatedObjectLookupPopup;\n    window.dismissRelatedLookupPopup = dismissRelatedLookupPopup;\n    window.showRelatedObjectPopup = showRelatedObjectPopup;\n    window.updateRelatedObjectLinks = updateRelatedObjectLinks;\n    window.dismissAddRelatedObjectPopup = dismissAddRelatedObjectPopup;\n    window.dismissChangeRelatedObjectPopup = dismissChangeRelatedObjectPopup;\n    window.dismissDeleteRelatedObjectPopup = dismissDeleteRelatedObjectPopup;\n\n    // Kept for backward compatibility\n    window.showAddAnotherPopup = showRelatedObjectPopup;\n    window.dismissAddAnotherPopup = dismissAddRelatedObjectPopup;\n\n    $(document).ready(function() {\n        $(\"a[data-popup-opener]\").on('click', function(event) {\n            event.preventDefault();\n            opener.dismissRelatedLookupPopup(window, $(this).data(\"popup-opener\"));\n        });\n        $('body').on('click', '.related-widget-wrapper-link', function(e) {\n            e.preventDefault();\n            if (this.href) {\n                const event = $.Event('django:show-related', {href: this.href});\n                $(this).trigger(event);\n                if (!event.isDefaultPrevented()) {\n                    showRelatedObjectPopup(this);\n                }\n            }\n        }).on('change', '.related-widget-wrapper select', function() {\n            const event = $.Event('django:update-related');\n            $(this).trigger(event);\n            if (!event.isDefaultPrevented()) {\n                updateRelatedObjectLinks(this);\n            }\n        }).on('change', '.related-widget-wrapper input', function() {\n            if (this.checked) {\n                updateRelatedObjectLinks(this);\n            }\n        }).on('click', '.related-lookup', function(e) {\n            e.preventDefault();\n            const event = $.Event('django:lookup-related');\n            $(this).trigger(event);\n            if (!event.isDefaultPrevented()) {\n                showRelatedObjectLookupPopup(this);\n            }\n        });\n\n        $('.related-widget-wrapper select').trigger('change');\n        $('.related-widget-wrapper input:checked').trigger('change');\n    });\n\n})(jQuery);\n","/* global gettext */\n\n/**\n * Инициализация отслеживания изменения формы и вывод\n * предупреждения при попытке закрыть страницу без сохранения.\n */\nexport default function hookUnload(form) {\n    let submit = false;\n    let formHasChanged = false;\n\n    form.addEventListener('submit', function() {\n        submit = true;\n    });\n\n    const message = gettext('You have unsaved changes');\n    window.addEventListener('beforeunload', function(evt) {\n        if (!submit && formHasChanged) {\n            evt.returnValue = message;\n            return message;\n        }\n    });\n\n    // начинаем отслеживать изменения после первого действия\n    // пользователя, чтобы игнорировать последствия инициализации\n    document.addEventListener('keydown', userActionHandler);\n    document.addEventListener('mousedown', userActionHandler);\n    function userActionHandler() {\n        document.removeEventListener('keydown', userActionHandler);\n        document.removeEventListener('mousedown', userActionHandler);\n        form.addEventListener('change', function changeHandler(event) {\n            form.removeEventListener('change', changeHandler);\n\n            const target = event.target;\n            const widget = target.closest('.form-widget');\n            if (widget && form.contains(widget)) {\n                formHasChanged = true;\n            }\n        });\n    }\n}\n","document.addEventListener('click', function(event) {\n    const target = event.target;\n    const toggler = target.closest('.vPasswordTrigger');\n    if (toggler) {\n        const field = toggler.closest('.input-group');\n        const input = field && field.querySelector('input');\n        if (input) {\n            const toggles = ['text', 'password'];\n            const index = (toggles.indexOf(input.type) + 1) % 2;\n            input.type = toggles[index];\n        }\n    }\n});\n","/**\n * Класс для работы с инлайн-формами.\n * @namespace Formset\n */\n\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../emitters\";\n\n\n/**\n * Конструктор объектов ManagementForm\n * @param {Element} element\n * @constructor\n */\nfunction ManagementForm(element) {\n    this.element = element;\n}\n\nManagementForm.prototype.__property = function(selector) {\n    return function(value) {\n        const input = this.element.querySelector(selector);\n        if (typeof value === 'undefined') {\n            return parseInt(input.value.toString())\n        } else {\n            value = parseInt(value);\n            if (!isNaN(value)) {\n                input.value = value;\n            }\n        }\n    }\n};\n\nManagementForm.prototype.totalForms = ManagementForm.prototype.__property('input[name$=\"-TOTAL_FORMS\"]');\nManagementForm.prototype.maxForms = ManagementForm.prototype.__property('input[name$=\"-MAX_NUM_FORMS\"]');\n\n\n/**\n * Конструктор объектов Formset\n *\n * @param {Element|Node} root\n * @param {Object} [options]\n * @constructor\n */\nfunction Formset(root, options) {\n    this.opts = Object.assign({\n        prefix: 'form',\n        addButtonSelector: '.add-row',\n        deleteButtonSelector: '.delete-row',\n        formCssClass: 'inline-related',\n        emptyCssClass: 'empty-form',\n        onAdded: null,\n        onRemove: null\n    }, options);\n\n    this.root = root;\n    this.mgmt = new ManagementForm(root);\n\n    this.addButton = this.root.querySelector(this.opts.addButtonSelector);\n    if (!this.addButton) {\n        throw new Error('addButton not found');\n    }\n    this.addButton.hidden = this.mgmt.totalForms() >= this.mgmt.maxForms();\n    this.addButton.querySelector('a, button').addEventListener('click', function(event) {\n        event.preventDefault();\n        this.addRow();\n    }.bind(this));\n\n    const that = this;\n    this.root.addEventListener('click', function(event) {\n        const target = event.target;\n        const button = target.closest(that.opts.deleteButtonSelector);\n        if (button) {\n            event.preventDefault();\n            const row = target.closest('.' + that.opts.formCssClass);\n            that.deleteRow(row);\n        }\n    });\n}\n\n\n/**\n * Получение всех форм.\n * @returns {NodeListOf<Element>}\n */\nFormset.prototype.getRows = function() {\n    return this.root.querySelectorAll('.' + this.opts.formCssClass);\n};\n\n\n/**\n * Добавление новой формы.\n * @returns {?Node}\n */\nFormset.prototype.addRow = function() {\n    let totalForms = this.mgmt.totalForms();\n    const maxForms = this.mgmt.maxForms();\n    if (totalForms >= maxForms) {\n        return null\n    }\n\n    const templateElement = this.root.querySelector('.' + this.opts.emptyCssClass);\n    if (!templateElement) {\n        throw new Error('template form not found');\n    }\n\n    const row = templateElement.cloneNode(true);\n    row.classList.remove(this.opts.emptyCssClass);\n    templateElement.parentNode.insertBefore(row, templateElement);\n\n    this.mgmt.totalForms(++totalForms);\n\n    // addButton\n    this.addButton.hidden = totalForms >= maxForms;\n\n    // deleteButton\n    const deleteButton = row.querySelector(this.opts.deleteButtonSelector);\n    if (deleteButton) {\n        deleteButton.hidden = false;\n    }\n\n    // event\n    if (this.opts.onAdded) {\n        this.opts.onAdded.call(this, row, this.opts.prefix, totalForms);\n    }\n    emitters.dom.trigger('mutate', [row]);\n    emitters.inlines.trigger('added', [row, this.opts.prefix]);\n\n    // Django compatible\n    $(document).trigger('formset:added', [$(row), this.opts.prefix]);\n\n    return row;\n};\n\n\n/**\n * Удаление формы.\n * @param {Element|Node} row\n */\nFormset.prototype.deleteRow = function(row) {\n    let totalForms = this.mgmt.totalForms();\n\n    const rows = Array.from(this.getRows());\n    const row_index = rows.indexOf(row);\n    if (this.opts.onRemove) {\n        for (let i=row_index+1; i<rows.length; i++) {\n            this.opts.onRemove.call(this, rows[i], this.opts.prefix, i);\n        }\n    }\n\n    // event\n    emitters.dom.trigger('release', [row]);\n    emitters.inlines.trigger('remove', [row, this.opts.prefix]);\n\n    row.parentNode.removeChild(row);\n\n    // event\n    emitters.inlines.trigger('removed', [row, this.opts.prefix]);\n\n    // Django compatible\n    $(document).trigger('formset:removed', [$(row), this.opts.prefix]);\n\n    this.mgmt.totalForms(--totalForms);\n\n    // addButton\n    this.addButton.hidden = totalForms >= this.mgmt.maxForms();\n};\n\n\n/**\n * Установка порядкового номера всем элементам формы.\n * @param {Element|Node} row\n * @param {String} prefix\n * @param {Number} index\n */\nfunction updateFormIndex(row, prefix, index) {\n    const regex = new RegExp(\"(\" + prefix + \"-(\\\\d+|__prefix__))\");\n    const replacement = prefix + \"-\" + (index - 1);\n    row.querySelectorAll('*').forEach(function(element) {\n        if (element.htmlFor) {\n            element.htmlFor = element.htmlFor.replace(regex, replacement);\n        }\n        if (element.id) {\n            element.id = element.id.replace(regex, replacement);\n        }\n        if (element.name) {\n            element.name = element.name.replace(regex, replacement);\n        }\n    });\n    row.setAttribute('id', prefix + '-' + (index - 1));\n}\n\n\n/**\n * Обновление заголовка формы.\n * @param {Element|Node} row\n * @param {Number} index\n */\nfunction updateInlineLabel(row, index) {\n    const label = row.querySelector('.inline-label');\n    if (label) {\n        label.innerHTML = label.innerHTML.replace(/(#\\d+)/g, \"#\" + index);\n    }\n}\n\n\nfunction initInlineGroups(root = document.body) {\n    root.querySelectorAll('.inline-group').forEach(function(inlineGroup) {\n        switch(inlineGroup.dataset.inlineType) {\n            case \"stacked\":\n                new Formset(inlineGroup, {\n                    prefix: inlineGroup.dataset.inlinePrefix,\n                    onAdded: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                        updateInlineLabel(row, index);\n                    },\n                    onRemove: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                        updateInlineLabel(row, index);\n                    }\n                });\n                break;\n            case \"tabular\":\n                new Formset(inlineGroup, {\n                    prefix: inlineGroup.dataset.inlinePrefix,\n                    onAdded: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                    },\n                    onRemove: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                    }\n                });\n                break;\n        }\n    });\n}\n\n\nwhenDomReady(initInlineGroups);\n","import autosize from \"autosize\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"./emitters\";\n\n\nfunction initAutosize(root = document.body) {\n    let selector = 'textarea[autosize]';\n    root.matches(selector) && autosize(root);\n    autosize(root.querySelectorAll(selector));\n}\n\n\nwhenDomReady(function() {\n    initAutosize();\n\n    // FIX bootstrap tabs\n    $(document).on('shown.bs.tab', function(event) {\n        const tab_selector = event.target.getAttribute('href');\n        const tab_pane = tab_selector && document.querySelector(tab_selector);\n        if (tab_pane) {\n            autosize.update(tab_pane.querySelectorAll('textarea[autosize]'));\n        }\n    });\n});\n\nemitters.dom.on('mutate', initAutosize);\n\n// share plugin\nwindow.paperAdmin = window.paperAdmin || {};\nObject.assign(window.paperAdmin, {\n    autosize,\n});\n","import \"gsap/ScrollToPlugin\";\nimport {TweenLite} from \"gsap\";\nimport whenDomReady from \"when-dom-ready\";\n\nconst ERROR_MIN_VISIBILITY = 50;\n\n\nwhenDomReady(function() {\n    const errorContainers = document.querySelectorAll('.invalid, .formset-errors, .formset-form-errors');\n    const firstErrorContainer = Array.from(errorContainers).find(function(errorContainer) {\n        return errorContainer.innerHTML !== '';\n    });\n\n    if (firstErrorContainer) {\n        // скролл к ошибке\n        const errorRect = firstErrorContainer.getBoundingClientRect();\n        const errorTop = errorRect.top;\n        const isVisible = (errorTop > ERROR_MIN_VISIBILITY) && (errorTop < document.documentElement.clientHeight - ERROR_MIN_VISIBILITY);\n        if (!isVisible) {\n            setTimeout(function() {\n                TweenLite.to(window, 0.5, {\n                    scrollTo: {\n                        y: errorTop - Math.floor(document.documentElement.clientHeight / 2),\n                        offsetY: -25\n                    }\n                });\n            });\n        }\n    } else {\n        const hash = location.hash.substr(1).replace(/-panel$/i, '-tab');\n        const current_tab = hash && document.querySelector(`#${hash}`);\n        if (current_tab) {\n            $(current_tab).tab('show');\n        }\n    }\n});\n\n\n$(document).on('shown.bs.tab', function(event) {\n    const tab_name = event.target.getAttribute('aria-controls');\n    if (tab_name) {\n        history.replaceState(null, '', `#${tab_name}`);\n\n        const form = document.getElementById('changeform');\n        if (form) {\n            const action = new URL(form.action);\n            action.hash = tab_name;\n            form.action = action.toString();\n        }\n    }\n});\n","import \"select2\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"select2/dist/css/select2.min.css\";\nimport \"../../css/widgets/autocomplete.css\";\n\n\nfunction initWidget(options, element) {\n    if (!element.closest('.empty-form')) {\n        $(element).select2(options);\n    }\n}\n\n\n/**\n * Инициализация Autocomplete виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let selector = '.admin-autocomplete';\n    let options = {\n        ajax: {\n            data: function(params) {\n                return {\n                    term: params.term,\n                    page: params.page\n                };\n            }\n        }\n    };\n    root.matches(selector) && initWidget(options, root);\n    root.querySelectorAll(selector).forEach(initWidget.bind(null, options));\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n","/**\n * Вставка имени файла в название кнопки\n */\ndocument.addEventListener('change', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        let fileName = target.value.split('\\\\').pop();\n        let buttonName = target.nextElementSibling.querySelector('span');\n        if (buttonName) {\n            if (fileName) {\n                buttonName.textContent = fileName;\n            } else {\n                buttonName.textContent = buttonName.dataset.initialText;\n            }\n        }\n    }\n});\n\n/**\n * Фикс для Firefox.\n */\ndocument.addEventListener('focus', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        target.classList.add('focused');\n    }\n});\n\ndocument.addEventListener('blur', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        target.classList.remove('focused');\n    }\n});\n","document.addEventListener('input', function(event) {\n    const target = event.target;\n    const input = target.closest('.vEmailInput');\n    const widget = input && input.closest('.input-group');\n    const link_tag = widget && widget.querySelector('.input-group-text');\n    if (link_tag) {\n        let email = input.value.trim();\n        if (email) {\n            link_tag.href = 'mailto:' + input.value;\n        } else {\n            link_tag.removeAttribute('href');\n        }\n    }\n});\n","import \"multiselect\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"../../css/widgets/multiselect.scss\";\n\n\nfunction initWidget(element) {\n    if (!element.closest('.empty-form')) {\n        $(element).multiSelect();\n    }\n}\n\n\n/**\n * Инициализация MultiSelect виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let selector = '.vMultiSelect';\n    root.matches(selector) && initWidget(root);\n    root.querySelectorAll(selector).forEach(initWidget);\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n","document.addEventListener('input', function(event) {\n    const target = event.target;\n    const input = target.closest('.vURLInput');\n    const widget = input && input.closest('.input-group');\n    const link_tag = widget && widget.querySelector('.input-group-text');\n    if (link_tag) {\n        let link = input.value.trim();\n        if (link) {\n            link_tag.href = link;\n        } else {\n            link_tag.removeAttribute('href');\n        }\n    }\n});\n"],"sourceRoot":""}
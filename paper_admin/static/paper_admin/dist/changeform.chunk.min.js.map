{"version":3,"sources":["webpack:///./paper_admin/static/paper_admin/src/css/widgets/autocomplete.css?fafe","webpack:///./paper_admin/static/paper_admin/src/css/widgets/datetime.scss?0a02","webpack:///./paper_admin/static/paper_admin/src/css/widgets/multiselect.scss?3e20","webpack:///./paper_admin/static/paper_admin/src/js/changeform.js","webpack:///./paper_admin/static/paper_admin/src/js/components/RelatedObjectLookups.js","webpack:///./paper_admin/static/paper_admin/src/js/components/autosize.js","webpack:///./paper_admin/static/paper_admin/src/js/components/hook_unload.js","webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/SortButtons.js","webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/inlines.js","webpack:///./paper_admin/static/paper_admin/src/js/components/inlines/sortable.js","webpack:///./paper_admin/static/paper_admin/src/js/components/tabs.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/autocomplete.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/clearable_file.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/datetime.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/email.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/multiselect.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/password.js","webpack:///./paper_admin/static/paper_admin/src/js/widgets/url.js"],"names":["whenDomReady","form","document","getElementById","hookUnload","window","django_prepopulated_fields","length","$","id_to_windowname","text","replace","windowname_to_id","showAdminPopup","triggeringLink","name_regexp","add_popup","name","id","href","indexOf","browser_left","screenX","screenLeft","browser_top","screenY","screenTop","browser_width","outerWidth","body","clientWidth","browser_height","outerHeight","clientHeight","popup_width","popup_height","top_position","Math","round","left_position","win","open","focus","showRelatedObjectLookupPopup","dismissRelatedLookupPopup","chosenId","elem","className","value","close","showRelatedObjectPopup","updateRelatedObjectLinks","$this","siblings","closest","find","val","each","elm","attr","removeAttr","dismissAddRelatedObjectPopup","newId","newRepr","elemName","nodeName","toUpperCase","options","Option","trigger","dismissChangeRelatedObjectPopup","objId","select","textContent","dismissDeleteRelatedObjectPopup","remove","showAddAnotherPopup","dismissAddAnotherPopup","ready","on","event","preventDefault","opener","data","e","Event","isDefaultPrevented","checked","jQuery","initAutosize","root","selector","matches","autosize","querySelectorAll","tab_selector","target","getAttribute","tab_pane","querySelector","update","emitters","dom","paperAdmin","Object","assign","submit","formHasChanged","addEventListener","message","gettext","evt","returnValue","userActionHandler","removeEventListener","changeHandler","widget","contains","gsap","registerPlugin","ScrollToPlugin","SortButtons","opts","speed","items","moveUpBtn","moveDownBtn","disabledClass","scrollWindow","scrollMargin","top","bottom","ignore","onChange","_onClick","bind","updateBounds","prototype","moveUpButton","classList","item","stopPropagation","moveUp","moveDownButton","moveDown","_findNextItem","element","nextItem","nextElementSibling","_findPreviousItem","prevItem","previousElementSibling","_swap","elem1","elem2","reversed","rect1","getBoundingClientRect","rect2","initialCSSText1","style","cssText","initialCSSText2","disableItemButtons","after","spaceY","height","transform","tl","TimelineLite","onComplete","to","duration","y","clearProps","pageYOffset","documentElement","scrollTop","newYOffset","topBound","bottomBound","innerHeight","needScrollWindow","scrollTo","max","call","upBtn","downBtn","add","forEach","firstItem","firstItemBtn","lastItem","lastItemBtn","ManagementForm","__property","input","parseInt","toString","isNaN","totalForms","maxForms","Formset","prefix","addButtonSelector","deleteButtonSelector","formCssClass","emptyCssClass","animationSpeed","onAdded","onRemove","_inline_formset","mgmt","addButton","Error","hidden","addRow","that","button","row","deleteRow","getRows","templateElement","cloneNode","parentNode","insertBefore","tagName","from","deleteButton","dispatchEvent","CustomEvent","detail","inlines","rows","Array","row_index","i","removeChild","updateFormIndex","index","regex","RegExp","replacement","htmlFor","setAttribute","updateInlineLabel","label","innerHTML","initInlineGroups","inlineGroup","dataset","inlineType","inlinePrefix","inlineGroups","sortButtonsObj","fillInlineOrder","currentOrder","inlineForms","inlineForm","formUtils","containsChangedField","replaceFormIndex","inlineFormset","ERROR_MIN_VISIBILITY","errorContainers","firstErrorContainer","errorContainer","errorRect","errorTop","isVisible","setTimeout","floor","offsetY","hash","location","substr","current_tab","tab","tab_name","history","replaceState","action","URL","initWidget","select2","initWidgets","ajax","params","term","page","fileName","split","pop","buttonName","initialText","flatpickr","date_selector","date_options","altInput","altFormat","dateFormat","time_selector","time_options","allowInput","enableTime","noCalendar","time_24hr","fake_event","KeyboardEvent","bubbles","cancelable","keyCode","deltaY","passive","_flatpickr","link_tag","email","trim","removeAttribute","multiSelect","toggler","field","icon","classes","types","type","link"],"mappings":"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","file":"changeform.chunk.min.js","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* global gettext */\n\nimport whenDomReady from \"when-dom-ready\";\nimport hookUnload from \"./components/hook_unload\";\nimport \"./components/inlines/inlines\";\nimport \"./components/inlines/sortable\";\nimport \"./components/RelatedObjectLookups\";\nimport \"./components/autosize\";\nimport \"./components/tabs\";\nimport \"./widgets/autocomplete\";\nimport \"./widgets/clearable_file\";\nimport \"./widgets/datetime\";\nimport \"./widgets/email\";\nimport \"./widgets/multiselect\";\nimport \"./widgets/password\";\nimport \"./widgets/url\";\n\n\nwhenDomReady(function() {\n    // предупреждение при закрытии формы\n    const form = document.getElementById('changeform');\n    if (form) {\n        hookUnload(form);\n    }\n\n    // динамическая подгрузка скрипта для prepopulate_fields\n    if (window.django_prepopulated_fields && window.django_prepopulated_fields.length) {\n        import(/* webpackChunkName: \"prepopulate\" */ './components/prepopulate/prepopulate');\n    }\n});\n","// Handles related-objects functionality: lookup link for raw_id_fields\n// and Add Another links.\n\n(function($) {\n    'use strict';\n\n    // IE doesn't accept periods or dashes in the window name, but the element IDs\n    // we use to generate popup window names may contain them, therefore we map them\n    // to allowed characters in a reversible way so that we can locate the correct\n    // element when the popup window is dismissed.\n    function id_to_windowname(text) {\n        text = text.replace(/\\./g, '__dot__');\n        text = text.replace(/-/g, '__dash__');\n        return text;\n    }\n\n    function windowname_to_id(text) {\n        text = text.replace(/__dot__/g, '.');\n        text = text.replace(/__dash__/g, '-');\n        return text;\n    }\n\n    function showAdminPopup(triggeringLink, name_regexp, add_popup) {\n        let name = triggeringLink.id.replace(name_regexp, '');\n        name = id_to_windowname(name);\n        let href = triggeringLink.href;\n        if (add_popup) {\n            if (href.indexOf('?') === -1) {\n                href += '?_popup=1';\n            } else {\n                href += '&_popup=1';\n            }\n        }\n\n        // Центрирование popup\n        const browser_left = typeof window.screenX !== 'undefined' ? window.screenX : window.screenLeft,\n            browser_top = typeof window.screenY !== 'undefined' ? window.screenY : window.screenTop,\n            browser_width = typeof window.outerWidth !== 'undefined' ? window.outerWidth : document.body.clientWidth,\n            browser_height = typeof window.outerHeight !== 'undefined' ? window.outerHeight : document.body.clientHeight,\n            popup_width = 940,\n            popup_height = 600,\n            top_position = browser_top + Math.round((browser_height - popup_height) / 2),\n            left_position = browser_left + Math.round((browser_width - popup_width) / 2);\n\n        const win = window.open(href, name,\n            'width=' + popup_width +\n            ',height=' + popup_height +\n            ',top=' + top_position +\n            ',left=' + left_position +\n            ',resizable=yes,scrollbars=yes'\n        );\n\n        win.focus();\n        return false;\n    }\n\n    function showRelatedObjectLookupPopup(triggeringLink) {\n        return showAdminPopup(triggeringLink, /^lookup_/, true);\n    }\n\n    function dismissRelatedLookupPopup(win, chosenId) {\n        const name = windowname_to_id(win.name);\n        const elem = document.getElementById(name);\n        if (elem.className.indexOf('vManyToManyRawIdAdminField') !== -1 && elem.value) {\n            elem.value += ',' + chosenId;\n        } else {\n            document.getElementById(name).value = chosenId;\n        }\n        win.close();\n    }\n\n    function showRelatedObjectPopup(triggeringLink) {\n        return showAdminPopup(triggeringLink, /^(change|add|delete)_/, false);\n    }\n\n    function updateRelatedObjectLinks(triggeringLink) {\n        const $this = $(triggeringLink);\n        const siblings = $this.closest('.related-widget-wrapper').find('.view-related, .change-related, .delete-related');\n        if (!siblings.length) {\n            return;\n        }\n        const value = $this.val();\n        if (value) {\n            siblings.each(function() {\n                const elm = $(this);\n                elm.attr('href', elm.attr('data-href-template').replace('__fk__', value));\n            });\n        } else {\n            siblings.removeAttr('href');\n        }\n    }\n\n    function dismissAddRelatedObjectPopup(win, newId, newRepr) {\n        const name = windowname_to_id(win.name);\n        const elem = document.getElementById(name);\n        if (elem) {\n            const elemName = elem.nodeName.toUpperCase();\n            if (elemName === 'SELECT') {\n                elem.options[elem.options.length] = new Option(newRepr, newId, true, true);\n            } else if (elemName === 'INPUT') {\n                if (elem.className.indexOf('vManyToManyRawIdAdminField') !== -1 && elem.value) {\n                    elem.value += ',' + newId;\n                } else {\n                    elem.value = newId;\n                }\n            }\n            // Trigger a change event to update related links if required.\n            $(elem).trigger('change');\n        }\n        win.close();\n    }\n\n    function dismissChangeRelatedObjectPopup(win, objId, newRepr, newId) {\n        const id = windowname_to_id(win.name).replace(/^edit_/, '');\n        const select = $('#' + id);\n        select.find('option').each(function() {\n            if (this.value === objId) {\n                this.textContent = newRepr;\n                this.value = newId;\n            }\n        });\n        win.close();\n    }\n\n    function dismissDeleteRelatedObjectPopup(win, objId) {\n        const id = windowname_to_id(win.name).replace(/^delete_/, '');\n        const select = $('#' + id);\n        select.find('option').each(function() {\n            if (this.value === objId) {\n                $(this).remove();\n            }\n        }).trigger('change');\n        win.close();\n    }\n\n    // Global for testing purposes\n    window.id_to_windowname = id_to_windowname;\n    window.windowname_to_id = windowname_to_id;\n\n    window.showRelatedObjectLookupPopup = showRelatedObjectLookupPopup;\n    window.dismissRelatedLookupPopup = dismissRelatedLookupPopup;\n    window.showRelatedObjectPopup = showRelatedObjectPopup;\n    window.updateRelatedObjectLinks = updateRelatedObjectLinks;\n    window.dismissAddRelatedObjectPopup = dismissAddRelatedObjectPopup;\n    window.dismissChangeRelatedObjectPopup = dismissChangeRelatedObjectPopup;\n    window.dismissDeleteRelatedObjectPopup = dismissDeleteRelatedObjectPopup;\n\n    // Kept for backward compatibility\n    window.showAddAnotherPopup = showRelatedObjectPopup;\n    window.dismissAddAnotherPopup = dismissAddRelatedObjectPopup;\n\n    $(document).ready(function() {\n        $(\"a[data-popup-opener]\").on('click', function(event) {\n            event.preventDefault();\n            opener.dismissRelatedLookupPopup(window, $(this).data(\"popup-opener\"));\n        });\n        $('body').on('click', '.related-widget-wrapper-link', function(e) {\n            e.preventDefault();\n            if (this.href) {\n                const event = $.Event('django:show-related', {href: this.href});\n                $(this).trigger(event);\n                if (!event.isDefaultPrevented()) {\n                    showRelatedObjectPopup(this);\n                }\n            }\n        }).on('change', '.related-widget-wrapper select', function() {\n            const event = $.Event('django:update-related');\n            $(this).trigger(event);\n            if (!event.isDefaultPrevented()) {\n                updateRelatedObjectLinks(this);\n            }\n        }).on('change', '.related-widget-wrapper input', function() {\n            if (this.checked) {\n                updateRelatedObjectLinks(this);\n            }\n        }).on('click', '.related-lookup', function(e) {\n            e.preventDefault();\n            const event = $.Event('django:lookup-related');\n            $(this).trigger(event);\n            if (!event.isDefaultPrevented()) {\n                showRelatedObjectLookupPopup(this);\n            }\n        });\n\n        $('.related-widget-wrapper select').trigger('change');\n        $('.related-widget-wrapper input:checked').trigger('change');\n    });\n\n})(jQuery);\n","import autosize from \"autosize\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"./emitters\";\n\n\nfunction initAutosize(root = document.body) {\n    let selector = 'textarea[autosize]';\n    root.matches(selector) && autosize(root);\n    autosize(root.querySelectorAll(selector));\n}\n\n\nwhenDomReady(function() {\n    initAutosize();\n\n    // FIX bootstrap tabs\n    $(document).on('shown.bs.tab', function(event) {\n        const tab_selector = event.target.getAttribute('href');\n        const tab_pane = tab_selector && document.querySelector(tab_selector);\n        if (tab_pane) {\n            autosize.update(tab_pane.querySelectorAll('textarea[autosize]'));\n        }\n    });\n});\n\nemitters.dom.on('mutate', initAutosize);\n\n// share plugin\nwindow.paperAdmin = window.paperAdmin || {};\nObject.assign(window.paperAdmin, {\n    autosize,\n});\n","/* global gettext */\n\n/**\n * Инициализация отслеживания изменения формы и вывод\n * предупреждения при попытке закрыть страницу без сохранения.\n */\nexport default function hookUnload(form) {\n    let submit = false;\n    let formHasChanged = false;\n\n    form.addEventListener('submit', function() {\n        submit = true;\n    });\n\n    const message = gettext('You have unsaved changes');\n    window.addEventListener('beforeunload', function(evt) {\n        if (!submit && formHasChanged) {\n            evt.returnValue = message;\n            return message;\n        }\n    });\n\n    // начинаем отслеживать изменения после первого действия\n    // пользователя, чтобы игнорировать последствия инициализации\n    document.addEventListener('keydown', userActionHandler);\n    document.addEventListener('mousedown', userActionHandler);\n    function userActionHandler() {\n        document.removeEventListener('keydown', userActionHandler);\n        document.removeEventListener('mousedown', userActionHandler);\n        form.addEventListener('change', function changeHandler(event) {\n            form.removeEventListener('change', changeHandler);\n\n            const target = event.target;\n            const widget = target.closest('.form-widget');\n            if (widget && form.contains(widget)) {\n                formHasChanged = true;\n            }\n        });\n    }\n}\n","/**\n * Сортировка DOM-элементов с помощью кнопок.\n * @module SortButtons\n */\n\n/**\n * @typedef {Object} module:SortButtons.SortButtonsOptions\n * @property {Number}    speed\n * @property {String}    [items]\n * @property {String}    [moveUpBtn]\n * @property {String}    [moveDownBtn]\n * @property {String}    [disabledClass]\n * @property {?String}   [ignore]\n * @property {?Function} [onChange]\n */\nimport {gsap, TimelineLite} from \"gsap\";\nimport {ScrollToPlugin} from \"gsap/ScrollToPlugin\";\ngsap.registerPlugin(ScrollToPlugin);\n\n\n/**\n * Конструктор объектов SortButtons.\n * @param {Element} root\n * @param {module:SortButtons.SortButtonsOptions} [options]\n * @constructor\n */\nfunction SortButtons(root, options) {\n    /** @type module:SortButtons.SortButtonsOptions */\n    this.opts = Object.assign({\n        speed: 1,\n        items: '.item',\n        moveUpBtn: '.move-up',\n        moveDownBtn: '.move-down',\n        disabledClass: 'disabled',\n        scrollWindow: true,\n        scrollMargin: {\n            top: 300,\n            bottom: 350\n        },\n        ignore: null,\n        onChange: null\n    }, options);\n\n    /** @type {Element} */\n    this.root = root;\n\n    root.addEventListener('click', this._onClick.bind(this));\n    root.addEventListener('update:sortbuttons', this.updateBounds.bind(this));\n    this.updateBounds();\n}\n\n/**\n * Обработчик события клика в пределах корневого элемента.\n * @param {MouseEvent} event\n * @private\n */\nSortButtons.prototype._onClick = function(event) {\n    const target = event.target;\n\n    const moveUpButton = target.closest(this.opts.moveUpBtn);\n    if (moveUpButton && this.root.contains(moveUpButton)) {\n        if (moveUpButton.classList.contains(this.opts.disabledClass)) {\n            return\n        }\n\n        const item = moveUpButton.closest(this.opts.items);\n        if (item) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.moveUp(item);\n        }\n        return\n    }\n\n    const moveDownButton = target.closest(this.opts.moveDownBtn);\n    if (moveDownButton && this.root.contains(moveDownButton)) {\n        if (moveDownButton.classList.contains(this.opts.disabledClass)) {\n            return\n        }\n\n        const item = moveDownButton.closest(this.opts.items);\n        if (item) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.moveDown(item);\n        }\n    }\n};\n\n/**\n * Поиск ближайшего перемещаемого элемента справа, начиная с element.\n * @param {Element} element\n * @returns {Element}\n * @private\n */\nSortButtons.prototype._findNextItem = function(element) {\n    let nextItem = element;\n    while (nextItem) {\n        if (this.opts.ignore && nextItem.matches(this.opts.ignore)) {\n            nextItem = nextItem.nextElementSibling;\n        } else if (!nextItem.matches(this.opts.items)) {\n            nextItem = nextItem.nextElementSibling;\n        } else {\n            break\n        }\n    }\n    return nextItem;\n};\n\n/**\n * Поиск ближайшего перемещаемого элемента слева, начиная с element.\n * @param {Element} element\n * @returns {Element}\n * @private\n */\nSortButtons.prototype._findPreviousItem = function(element) {\n    let prevItem = element;\n    while (prevItem) {\n        if (this.opts.ignore && prevItem.matches(this.opts.ignore)) {\n            prevItem = prevItem.previousElementSibling;\n        } else if (!prevItem.matches(this.opts.items)) {\n            prevItem = prevItem.previousElementSibling;\n        } else {\n            break\n        }\n    }\n    return prevItem;\n};\n\n/**\n * Перемещение элемента вниз.\n * @param {Element} item\n */\nSortButtons.prototype.moveDown = function(item) {\n    const nextItem = this._findNextItem(item.nextElementSibling);\n    if (nextItem) {\n        this._swap(item, nextItem);\n    }\n};\n\n/**\n * Перемещение элемента наверх.\n * @param {Element} item\n */\nSortButtons.prototype.moveUp = function(item) {\n    const prevItem = this._findPreviousItem(item.previousElementSibling);\n    if (prevItem) {\n        this._swap(prevItem, item, true);\n    }\n};\n\n/**\n * Меняет местами два соседних элемента elem1 и elem2 с анимацией.\n * @param {Element} elem1\n * @param {Element} elem2\n * @param {boolean} reversed - True, если elem2 считается активным\n * @private\n */\nSortButtons.prototype._swap = function(elem1, elem2, reversed=false) {\n    //   Initial state:\n    //\n    //  |-------------|\n    //  |    elem1    |\n    //  |             |\n    //  |-------------|\n    //\n    //  |-------------|\n    //  |    elem2    |\n    //  |-------------|\n    //\n\n    const rect1 = elem1.getBoundingClientRect();\n    const rect2 = elem2.getBoundingClientRect();\n    const initialCSSText1 = elem1.style.cssText;\n    const initialCSSText2 = elem2.style.cssText;\n\n    this.disableItemButtons(elem1);\n    this.disableItemButtons(elem2);\n    elem2.after(elem1);\n\n    // имитация начального расположения\n    const spaceY = rect2.top - rect1.top - rect1.height;\n    elem1.style.transform = `translate3d(0, ${-rect2.height - spaceY}px, ${reversed ? 0 : 1}px)`;\n    elem2.style.transform = `translate3d(0, ${rect2.top - rect1.top}px, ${reversed ? 1 : 0}px)`;\n\n    const tl = new TimelineLite({\n        onComplete: function() {\n            elem1.style.cssText = initialCSSText1;\n            elem2.style.cssText = initialCSSText2;\n            this.updateBounds();\n        }.bind(this)\n    })\n    .to(elem1, {duration: this.opts.speed, y: 0, clearProps: 'all'})\n    .to(elem2, {duration: this.opts.speed, y: 0, clearProps: 'all'}, 0);\n\n    if (this.opts.scrollWindow) {\n        const pageYOffset = window.pageYOffset || document.documentElement.scrollTop;\n        const newYOffset = pageYOffset + (reversed ? rect1.top - rect2.top : rect2.top - rect1.top);\n        const topBound = this.opts.scrollMargin.top;\n        const bottomBound = window.innerHeight - this.opts.scrollMargin.bottom;\n\n        let needScrollWindow = true;\n        if (reversed) {\n            needScrollWindow &= !((rect1.top > bottomBound) && (rect2.top > bottomBound));\n        } else {\n            needScrollWindow &= !((rect1.top < topBound) && (rect2.top < topBound));\n        }\n\n        if (needScrollWindow) {\n            tl.to(window, {\n                duration: this.opts.speed,\n                scrollTo: {\n                    y: Math.max(0, newYOffset)\n                }\n            }, 0)\n        }\n    }\n\n    // callback\n    if (typeof this.opts.onChange === 'function') {\n        this.opts.onChange.call(this, elem1, elem2);\n    }\n};\n\n/**\n * Отключение кнопок сортировки.\n * @param {Element} item\n */\nSortButtons.prototype.disableItemButtons = function(item) {\n    const upBtn = item.querySelector(this.opts.moveUpBtn);\n    const downBtn = item.querySelector(this.opts.moveDownBtn);\n    upBtn.classList.add(this.opts.disabledClass);\n    downBtn.classList.add(this.opts.disabledClass);\n};\n\n/**\n * Отключение у граничных элементов кнопок, которые не имеют смысла.\n */\nSortButtons.prototype.updateBounds = function() {\n    const items = this.root.querySelectorAll(this.opts.items);\n    if (!items.length) {\n        return\n    }\n\n    items.forEach(function(item) {\n        const upBtn = item.querySelector(this.opts.moveUpBtn);\n        const downBtn = item.querySelector(this.opts.moveDownBtn);\n        upBtn.classList.remove(this.opts.disabledClass);\n        downBtn.classList.remove(this.opts.disabledClass);\n    }.bind(this));\n\n    const firstItem = this._findNextItem(items[0]);\n    if (firstItem) {\n        const firstItemBtn = firstItem.querySelector(this.opts.moveUpBtn);\n        if (firstItemBtn) {\n            firstItemBtn.classList.add(this.opts.disabledClass);\n        }\n    }\n\n    const lastItem = this._findPreviousItem(items[items.length - 1]);\n    if (lastItem) {\n        const lastItemBtn = lastItem.querySelector(this.opts.moveDownBtn);\n        if (lastItemBtn) {\n            lastItemBtn.classList.add(this.opts.disabledClass);\n        }\n    }\n};\n\n\nexport default SortButtons;\n","/**\n * Класс для работы с инлайн-формами.\n * @namespace Formset\n */\n\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../emitters\";\nimport {gsap} from \"gsap\";\nimport {ScrollToPlugin} from \"gsap/ScrollToPlugin\";\ngsap.registerPlugin(ScrollToPlugin);\n\n\n/**\n * Конструктор объектов ManagementForm\n * @param {Element} element\n * @constructor\n */\nfunction ManagementForm(element) {\n    this.element = element;\n}\n\nManagementForm.prototype.__property = function(selector) {\n    return function(value) {\n        const input = this.element.querySelector(selector);\n        if (typeof value === 'undefined') {\n            return parseInt(input.value.toString())\n        } else {\n            value = parseInt(value);\n            if (!isNaN(value)) {\n                input.value = value;\n            }\n        }\n    }\n};\n\nManagementForm.prototype.totalForms = ManagementForm.prototype.__property('input[name$=\"-TOTAL_FORMS\"]');\nManagementForm.prototype.maxForms = ManagementForm.prototype.__property('input[name$=\"-MAX_NUM_FORMS\"]');\n\n\n/**\n * Конструктор объектов Formset\n *\n * @param {Element|Node} root\n * @param {Object} [options]\n * @constructor\n */\nfunction Formset(root, options) {\n    this.opts = Object.assign({\n        prefix: 'form',\n        addButtonSelector: '.add-row',\n        deleteButtonSelector: '.delete-row',\n        formCssClass: 'inline-related',\n        emptyCssClass: 'empty-form',\n        animationSpeed: 300,\n        onAdded: null,\n        onRemove: null\n    }, options);\n\n    this.root = root;\n    this.root._inline_formset = this;\n    this.mgmt = new ManagementForm(root);\n\n    this.addButton = this.root.querySelector(this.opts.addButtonSelector);\n    if (!this.addButton) {\n        throw new Error('addButton not found');\n    }\n    this.addButton.hidden = this.mgmt.totalForms() >= this.mgmt.maxForms();\n    this.addButton.querySelector('a, button').addEventListener('click', function(event) {\n        event.preventDefault();\n        this.addRow();\n    }.bind(this));\n\n    const that = this;\n    this.root.addEventListener('click', function(event) {\n        const target = event.target;\n        const button = target.closest(that.opts.deleteButtonSelector);\n        if (button) {\n            event.preventDefault();\n            const row = target.closest('.' + that.opts.formCssClass);\n            that.deleteRow(row);\n        }\n    });\n}\n\n\n/**\n * Получение всех форм.\n * @returns {NodeListOf<Element>}\n */\nFormset.prototype.getRows = function() {\n    return this.root.querySelectorAll('.' + this.opts.formCssClass);\n};\n\n\n/**\n * Добавление новой формы.\n * @returns {?Node}\n */\nFormset.prototype.addRow = function() {\n    let totalForms = this.mgmt.totalForms();\n    const maxForms = this.mgmt.maxForms();\n    if (totalForms >= maxForms) {\n        return null\n    }\n\n    const templateElement = this.root.querySelector('.' + this.opts.emptyCssClass);\n    if (!templateElement) {\n        throw new Error('template form not found');\n    }\n\n    const row = templateElement.cloneNode(true);\n    const pageYOffset = window.pageYOffset || document.documentElement.scrollTop;\n    row.classList.remove(this.opts.emptyCssClass);\n    templateElement.parentNode.insertBefore(row, templateElement);\n\n    window.scrollTo({\n        top: pageYOffset\n    });\n\n    if (row.tagName !== 'TR') {\n        gsap.from(row, {\n            duration: this.opts.animationSpeed / 1000,\n            height: 0,\n            clearProps: 'all',\n        });\n    }\n\n    this.mgmt.totalForms(++totalForms);\n\n    // addButton\n    this.addButton.hidden = totalForms >= maxForms;\n\n    // deleteButton\n    const deleteButton = row.querySelector(this.opts.deleteButtonSelector);\n    if (deleteButton) {\n        deleteButton.hidden = false;\n    }\n\n    // event\n    if (this.opts.onAdded) {\n        this.opts.onAdded.call(this, row, this.opts.prefix, totalForms);\n    }\n    this.root.dispatchEvent(new CustomEvent('row-added', {\n        detail: [row, this.opts.prefix]\n    }));\n    emitters.dom.trigger('mutate', [row]);\n    emitters.inlines.trigger('added', [row, this.opts.prefix]);\n\n    // Django compatible\n    $(document).trigger('formset:added', [$(row), this.opts.prefix]);\n\n    return row;\n};\n\n\n/**\n * Удаление формы.\n * @param {Element|Node} row\n */\nFormset.prototype.deleteRow = function(row) {\n    let totalForms = this.mgmt.totalForms();\n\n    const rows = Array.from(this.getRows());\n    const row_index = rows.indexOf(row);\n    if (this.opts.onRemove) {\n        for (let i=row_index+1; i<rows.length; i++) {\n            this.opts.onRemove.call(this, rows[i], this.opts.prefix, i);\n        }\n    }\n\n    // event\n    emitters.dom.trigger('release', [row]);\n    emitters.inlines.trigger('remove', [row, this.opts.prefix]);\n\n    if (row.tagName !== 'TR') {\n        gsap.to(row, {\n            duration: this.opts.animationSpeed / 1000,\n            height: 0,\n            onComplete: function() {\n                row.parentNode.removeChild(row);\n            }\n        });\n    }\n\n    // event\n    emitters.inlines.trigger('removed', [row, this.opts.prefix]);\n    this.root.dispatchEvent(new CustomEvent('row-removed', {\n        detail: [row, this.opts.prefix]\n    }));\n\n    // Django compatible\n    $(document).trigger('formset:removed', [$(row), this.opts.prefix]);\n\n    this.mgmt.totalForms(--totalForms);\n\n    // addButton\n    this.addButton.hidden = totalForms >= this.mgmt.maxForms();\n};\n\n\n/**\n * Установка порядкового номера всем элементам формы.\n * @param {Element|Node} row\n * @param {String} prefix\n * @param {Number} index\n */\nfunction updateFormIndex(row, prefix, index) {\n    const regex = new RegExp(\"(\" + prefix + \"-(\\\\d+|__prefix__))\");\n    const replacement = prefix + \"-\" + (index - 1);\n    row.querySelectorAll('*').forEach(function(element) {\n        if (element.htmlFor) {\n            element.htmlFor = element.htmlFor.replace(regex, replacement);\n        }\n        if (element.id) {\n            element.id = element.id.replace(regex, replacement);\n        }\n        if (element.name) {\n            element.name = element.name.replace(regex, replacement);\n        }\n    });\n    row.setAttribute('id', prefix + '-' + (index - 1));\n}\n\n\n/**\n * Обновление заголовка формы.\n * @param {Element|Node} row\n * @param {Number} index\n */\nfunction updateInlineLabel(row, index) {\n    const label = row.querySelector('.inline-label');\n    if (label) {\n        label.innerHTML = label.innerHTML.replace(/(#\\d+)/g, \"#\" + index);\n    }\n}\n\n\nfunction initInlineGroups(root = document.body) {\n    root.querySelectorAll('.inline-group').forEach(function(inlineGroup) {\n        switch(inlineGroup.dataset.inlineType) {\n            case \"stacked\":\n                new Formset(inlineGroup, {\n                    prefix: inlineGroup.dataset.inlinePrefix,\n                    onAdded: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                        updateInlineLabel(row, index);\n                    },\n                    onRemove: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                        updateInlineLabel(row, index);\n                    }\n                });\n                break;\n            case \"tabular\":\n                new Formset(inlineGroup, {\n                    prefix: inlineGroup.dataset.inlinePrefix,\n                    onAdded: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                    },\n                    onRemove: function(row, prefix, index) {\n                        updateFormIndex(row, prefix, index);\n                    }\n                });\n                break;\n        }\n    });\n}\n\n\nwhenDomReady(initInlineGroups);\n","import whenDomReady from \"when-dom-ready\";\nimport formUtils from \"../form_utils\";\nimport SortButtons from \"./SortButtons\";\n\n\nwhenDomReady(function() {\n    const inlineGroups = document.querySelectorAll('.sortable-inline-group');\n    inlineGroups.forEach(function(inlineGroup) {\n        const sortButtonsObj = new SortButtons(inlineGroup, {\n            speed: inlineGroup.dataset.inlineType === 'tabular' ? 0.25 : 0.5,\n            items: '.sortable-item',\n            moveUpBtn: '.sortable-move-up',\n            moveDownBtn: '.sortable-move-down',\n            ignore: '.empty-form'\n        });\n\n        inlineGroup.addEventListener('row-added', function() {\n            sortButtonsObj.updateBounds();\n        });\n    });\n});\n\n\n/**\n * Установка значения сортировки инлайн-формам.\n * @param {Element} inlineGroup\n */\nfunction fillInlineOrder(inlineGroup) {\n    let currentOrder = 0;\n    const inlineForms = inlineGroup.querySelectorAll('.sortable-item:not(.empty-form)');\n    inlineForms.forEach(function(inlineForm) {\n        if (inlineForm.classList.contains('has_original')\n            || formUtils.containsChangedField(inlineForm)) {\n            const input = inlineForm.querySelector('.sortable-input');\n            if (input) {\n                input.value = currentOrder++;\n            }\n        }\n    });\n}\n\n\n/**\n * Замена индекса формы на порядковый, чтобы бэкенд Django отображал\n * формы в правильном порядке при ошибках валидации.\n * @param {Element} row\n * @param {String} prefix\n * @param {Number} index\n */\nfunction replaceFormIndex(row, prefix, index) {\n    const regex = new RegExp(\"(\" + prefix + \"-(\\\\d+))\");\n    const replacement = prefix + \"-\" + index;\n    row.querySelectorAll('*').forEach(function(element) {\n        if (element.htmlFor) {\n            element.htmlFor = element.htmlFor.replace(regex, replacement);\n        }\n        if (element.id) {\n            element.id = element.id.replace(regex, replacement);\n        }\n        if (element.name) {\n            element.name = element.name.replace(regex, replacement);\n        }\n    });\n    row.setAttribute('id', prefix + '-' + index);\n}\n\n\ndocument.addEventListener('submit', function(event) {\n    const form = event.target;\n    const inlineGroups = form.querySelectorAll('.sortable-inline-group');\n    inlineGroups.forEach(function(inlineGroup) {\n        fillInlineOrder(inlineGroup);\n\n        const inlineFormset = inlineGroup._inline_formset;\n        const selector = '.' + inlineFormset.opts.formCssClass + ':not(.' + inlineFormset.opts.emptyCssClass + ')';\n        inlineGroup.querySelectorAll(selector).forEach(function(form, index) {\n            replaceFormIndex(form, inlineFormset.opts.prefix, index);\n        });\n    });\n});\n","import {gsap} from \"gsap\";\nimport {ScrollToPlugin} from \"gsap/ScrollToPlugin\";\nimport whenDomReady from \"when-dom-ready\";\ngsap.registerPlugin(ScrollToPlugin);\n\nconst ERROR_MIN_VISIBILITY = 50;\n\n\nwhenDomReady(function() {\n    const errorContainers = document.querySelectorAll('.invalid, .formset-errors, .formset-form-errors');\n    const firstErrorContainer = Array.from(errorContainers).find(function(errorContainer) {\n        return errorContainer.innerHTML !== '';\n    });\n\n    if (firstErrorContainer) {\n        // скролл к ошибке\n        const errorRect = firstErrorContainer.getBoundingClientRect();\n        const errorTop = errorRect.top;\n        const isVisible = (errorTop > ERROR_MIN_VISIBILITY) && (errorTop < document.documentElement.clientHeight - ERROR_MIN_VISIBILITY);\n        if (!isVisible) {\n            setTimeout(function() {\n                gsap.to(window, {\n                    duration: 0.5,\n                    scrollTo: {\n                        y: errorTop - Math.floor(document.documentElement.clientHeight / 2),\n                        offsetY: -25\n                    }\n                });\n            });\n        }\n    } else {\n        const hash = location.hash.substr(1).replace(/-panel$/i, '-tab');\n        const current_tab = hash && document.querySelector(`#${hash}`);\n        if (current_tab) {\n            $(current_tab).tab('show');\n        }\n    }\n});\n\n\n$(document).on('shown.bs.tab', function(event) {\n    const tab_name = event.target.getAttribute('aria-controls');\n    if (tab_name) {\n        history.replaceState(null, '', `#${tab_name}`);\n\n        const form = document.getElementById('changeform');\n        if (form) {\n            const action = new URL(form.action);\n            action.hash = tab_name;\n            form.action = action.toString();\n        }\n    }\n});\n","import \"select2\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"select2/dist/css/select2.min.css\";\nimport \"../../css/widgets/autocomplete.css\";\n\n\nfunction initWidget(options, element) {\n    if (!element.closest('.empty-form')) {\n        $(element).select2(options);\n    }\n}\n\n\n/**\n * Инициализация Autocomplete виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let selector = '.admin-autocomplete';\n    let options = {\n        ajax: {\n            data: function(params) {\n                return {\n                    term: params.term,\n                    page: params.page\n                };\n            }\n        }\n    };\n    root.matches(selector) && initWidget(options, root);\n    root.querySelectorAll(selector).forEach(initWidget.bind(null, options));\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n","/**\n * Вставка имени файла в название кнопки\n */\ndocument.addEventListener('change', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        let fileName = target.value.split('\\\\').pop();\n        let buttonName = target.nextElementSibling.querySelector('span');\n        if (buttonName) {\n            if (fileName) {\n                buttonName.textContent = fileName;\n            } else {\n                buttonName.textContent = buttonName.dataset.initialText;\n            }\n        }\n    }\n});\n\n/**\n * Фикс для Firefox.\n */\ndocument.addEventListener('focus', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        target.classList.add('focused');\n    }\n});\n\ndocument.addEventListener('blur', function(event) {\n    const target = event.target;\n    if ((target.tagName === 'INPUT') && target.closest('.vClearableFileField')) {\n        target.classList.remove('focused');\n    }\n});\n","import flatpickr from \"flatpickr\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"../../css/widgets/datetime.scss\";\n\n\nfunction initWidget(options, element) {\n    if (!element.closest('.empty-form')) {\n        flatpickr(element, options);\n    }\n}\n\n\n/**\n * Инициализация DateTime виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let date_selector = '.vDatePicker';\n    let date_options = {\n        altInput: true,\n        altFormat: \"F j, Y\",\n        dateFormat: \"Y-m-d\"\n    };\n    root.matches(date_selector) && initWidget(date_options, root);\n    root.querySelectorAll(date_selector).forEach(initWidget.bind(null, date_options));\n\n    let time_selector = '.vTimePicker';\n    let time_options = {\n        allowInput: true,\n        enableTime: true,\n        noCalendar: true,\n        dateFormat: \"H:i\",\n        time_24hr: true\n    };\n    root.matches(time_selector) && initWidget(time_options, root);\n    root.querySelectorAll(time_selector).forEach(initWidget.bind(null, time_options));\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n\n\n/**\n * Симуляция нажатия стрелок при прокрутке колеса мыши на полях выбора времени.\n */\ndocument.addEventListener('wheel', function(event) {\n    const target = event.target;\n    const widget = target.closest('.numInputWrapper');\n    const input = widget && widget.querySelector('input');\n    if (input) {\n        event.preventDefault();\n        const fake_event = new KeyboardEvent('keydown', {\n            bubbles: true,\n            cancelable: true,\n            keyCode: event.deltaY > 0 ? 40 : 38\n        });\n        input.dispatchEvent(fake_event);\n    }\n}, {passive: false});\n\n\n/**\n * Клик на иконку календаря\n */\ndocument.addEventListener('click', function(event) {\n    const target = event.target;\n    const button = target.closest('.vDateFieldTrigger');\n    const widget = button && button.closest('.input-group');\n    const input = widget && widget.querySelector('.vDateInput');\n    if (input && input._flatpickr) {\n        setTimeout(function() {\n            input._flatpickr.open();\n        }, 0)\n    }\n});\n","document.addEventListener('input', function(event) {\n    const target = event.target;\n    const input = target.closest('.vEmailInput');\n    const widget = input && input.closest('.input-group');\n    const link_tag = widget && widget.querySelector('.input-group-text');\n    if (link_tag) {\n        let email = input.value.trim();\n        if (email) {\n            link_tag.href = 'mailto:' + input.value;\n        } else {\n            link_tag.removeAttribute('href');\n        }\n    }\n});\n","import \"multiselect\";\nimport whenDomReady from \"when-dom-ready\";\nimport emitters from \"../components/emitters\";\n\n// CSS\nimport \"../../css/widgets/multiselect.scss\";\n\n\nfunction initWidget(element) {\n    if (!element.closest('.empty-form')) {\n        $(element).multiSelect();\n    }\n}\n\n\n/**\n * Инициализация MultiSelect виджетов\n * @param {Element} [root]\n */\nfunction initWidgets(root = document.body) {\n    let selector = '.vMultiSelect';\n    root.matches(selector) && initWidget(root);\n    root.querySelectorAll(selector).forEach(initWidget);\n}\n\n\nwhenDomReady(initWidgets);\nemitters.dom.on('mutate', initWidgets);\n","document.addEventListener('click', function(event) {\n    const target = event.target;\n    const toggler = target.closest('.vPasswordTrigger');\n    if (toggler) {\n        const field = toggler.closest('.input-group');\n        const icon = field && field.querySelector('i.fa');\n        const input = field && field.querySelector('input');\n        if (input) {\n            const classes = ['fa-eye-slash', 'fa-eye'];\n            const types = ['text', 'password'];\n            const index = (types.indexOf(input.type) + 1) % 2;\n            input.type = types[index];\n            icon.classList.add(classes[index]);\n            icon.classList.remove(classes[(index + 1) % 2]);\n        }\n    }\n});\n","document.addEventListener('input', function(event) {\n    const target = event.target;\n    const input = target.closest('.vURLInput');\n    const widget = input && input.closest('.input-group');\n    const link_tag = widget && widget.querySelector('.input-group-text');\n    if (link_tag) {\n        let link = input.value.trim();\n        if (link) {\n            link_tag.href = link;\n        } else {\n            link_tag.removeAttribute('href');\n        }\n    }\n});\n"],"sourceRoot":""}